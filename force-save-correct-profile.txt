// PASTE THIS IN DESKTOP CONSOLE TO SAVE CORRECT PROFILE:

(async function() {
    const profileKey = UserIDSystem.getProfileKey('golfer', AppState.currentUser.lineUserId);
    const profile = JSON.parse(localStorage.getItem(profileKey));
    
    // Fix: Add LINE picture URL to profile
    profile.linePictureUrl = AppState.currentUser.avatar;
    localStorage.setItem(profileKey, JSON.stringify(profile));
    
    // Now save to Supabase with correct data
    const result = await window.SupabaseDB.saveUserProfile({
        lineUserId: AppState.currentUser.lineUserId,
        name: AppState.currentUser.name,
        role: AppState.currentUser.role,
        phone: profile.personalInfo?.phone,
        email: profile.personalInfo?.email,
        homeClub: profile.golfInfo?.homeClub,
        language: profile.preferences?.communicationLanguage || 'en',
        personalInfo: profile.personalInfo,
        golfInfo: profile.golfInfo,
        professionalInfo: profile.professionalInfo,
        skills: profile.skills,
        preferences: profile.preferences,
        media: profile.media,
        privacy: profile.privacy,
        handicap: profile.golfInfo?.handicap,
        username: profile.personalInfo?.username,
        userId: AppState.currentUser.lineUserId,
        linePictureUrl: AppState.currentUser.avatar
    });
    
    console.log('âœ… SAVED TO SUPABASE:', result);
    console.log('Handicap:', profile.golfInfo?.handicap);
    console.log('Home Club:', profile.golfInfo?.homeClub);
    console.log('Picture URL:', AppState.currentUser.avatar);
})();
