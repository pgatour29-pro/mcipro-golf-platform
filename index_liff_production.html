<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport"/>
    <title>MyCaddyPro - Complete Mobile App</title>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0ABAB5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="MyCaddyPro">
    <link rel="manifest" href="./manifest.json">

    <!-- Favicon and Icons (commented out until favicon files are created) -->
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="./icons/apple-touch-icon.png"> -->
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="./icons/favicon-32x32.png"> -->
    <!-- <link rel="icon" type="image/png" sizes="16x16" href="./icons/favicon-16x16.png"> -->

    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <script>
        // Suppress Tailwind CDN production warning
        const originalWarn = console.warn;
        console.warn = function(...args) {
            const message = args.join(' ');
            if (!message.includes('cdn.tailwindcss.com should not be used in production')) {
                originalWarn.apply(console, args);
            }
        };
    </script>
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <script>
        // Restore console.warn
        console.warn = originalWarn;
    </script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#0ABAB5",
                        "primary-light": "#81C7C7",
                        "primary-dark": "#008B8B",
                        "background-light": "#FFFFFF",
                        "background-dark": "#F8F9FA",
                        "surface-light": "#FFFFFF",
                        "surface-dark": "#F8F9FA",
                        "text-light": "#2C3E50",
                        "text-dark": "#2C3E50",
                        "accent": "#E8F8F7",
                        "border": "#E1E8ED",
                    },
                    fontFamily: {
                        display: ["Manrope", "sans-serif"]
                    }
                },
            },
        };
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .material-symbols-outlined.fill {
            font-variation-settings: 'FILL' 1;
        }
        body {
            min-height: 100vh;
            min-height: 100dvh;
            overscroll-behavior: none;
            -webkit-overflow-scrolling: touch;
            touch-action: manipulation;
        }

        /* Mobile optimizations */
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        input, textarea, select {
            -webkit-user-select: text;
            user-select: text;
        }

        /* Safe area insets for notch devices */
        .safe-top {
            padding-top: env(safe-area-inset-top);
        }

        .safe-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
        .screen {
            display: none;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        .screen.active {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            min-height: 100dvh;
        }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .notification-toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #0ABAB5;
            color: #FFFFFF;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            z-index: 1000;
            animation: slideDown 0.3s ease;
        }
        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-100%); }
            to { transform: translateX(-50%) translateY(0); }
        }
        .tab-active {
            color: #0ABAB5 !important;
            border-bottom: 2px solid #0ABAB5 !important;
        }
        .tiffany-gradient {
            background: linear-gradient(135deg, #0ABAB5 0%, #81C7C7 100%);
        }
        .tiffany-card {
            background: #FFFFFF;
            border: 1px solid #E1E8ED;
            box-shadow: 0 2px 4px rgba(10, 186, 181, 0.1);
        }

        /* Mobile button optimizations */
        button, .cursor-pointer {
            min-height: 44px;
<!-- LINE LIFF: Production init using your exact LIFF ID -->
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      await liff.init({ liffId: "2008191806-0EdD8InR" }); // ✅ Production LIFF ID

      if (!liff.isLoggedIn()) {
        liff.login({ redirectUri: window.location.href });
        return;
      }

      const profile = await liff.getProfile();
      console.log("✅ LINE profile loaded", profile);

      // Expose for your existing code
      window.__lineProfile = profile;
      try { localStorage.setItem("lineProfile", JSON.stringify(profile)); } catch(e) {}

      // Non-invasive: call your existing function if present
      if (typeof updateUserNameDisplays === "function") {
        updateUserNameDisplays(profile.displayName || "Guest");
      }
    } catch (err) {
      console.error("LIFF init failed", err);
    }
  });
</script>
<!-- /LINE LIFF -->
            min-width: 44px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }

        button:active, .cursor-pointer:active {
            transform: scale(0.98);
            opacity: 0.8;
        }

        /* Mobile input optimizations */
        input, textarea, select {
            font-size: 16px !important;
            border-radius: 8px;
            padding: 12px 16px;
        }

        /* Tab navigation mobile optimization */
        .tab-nav {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .tab-nav::-webkit-scrollbar {
            display: none;
        }

        /* Footer safe area */
        .footer-mobile {
            padding-bottom: max(env(safe-area-inset-bottom), 8px);
        }

        /* PWA optimizations */
        @media (display-mode: standalone) {
            body {
                background-color: #FFFFFF;
            }
        }
    </style>
</head>
<body class="font-display bg-white text-text-light">

<!-- LOGIN SCREEN -->
<div id="login" class="screen active">
    <div class="min-h-screen flex flex-col justify-center px-6 py-12 tiffany-gradient">
        <div class="sm:mx-auto sm:w-full sm:max-w-sm">
            <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-primary/10 flex items-center justify-center">
                <span class="material-symbols-outlined text-3xl text-primary">golf_course</span>
            </div>
            <h2 class="text-center text-3xl font-bold tracking-tight">MyCaddyPro</h2>
            <p class="text-center text-sm text-gray-500 mt-2" data-translate="golfcourse">Professional Golf Course Management</p>

            <!-- Language Selector -->
            <div class="mt-6">
                <label class="block text-sm font-medium mb-2 text-center" data-translate="language">Language</label>
                <select id="languageSelect" onchange="switchLanguage(this.value)"
                        class="block mx-auto rounded-md border-0 py-2 px-3 shadow-sm ring-1 ring-inset ring-border bg-white text-sm min-w-32">
                    <option value="en">English</option>
                    <option value="th">ไทย</option>
                    <option value="ko">한국어</option>
                    <option value="ja">日本語</option>
                </select>
            </div>
        </div>

        <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">
            <form class="space-y-6">
                <div>
                    <label for="username" class="block text-sm font-medium leading-6" data-translate="username">Username</label>
                    <div class="mt-2">
                        <input id="username" type="text" data-translate-placeholder="enter_username" placeholder="Enter username"
                               class="block w-full rounded-md border-0 py-3 px-3 shadow-sm ring-1 ring-inset ring-border bg-white placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary text-sm">
                    </div>
                </div>

                <div>
                    <label for="password" class="block text-sm font-medium leading-6" data-translate="password">Password</label>
                    <div class="mt-2">
                        <input id="password" type="password" data-translate-placeholder="enter_password" placeholder="Enter password"
                               class="block w-full rounded-md border-0 py-3 px-3 shadow-sm ring-1 ring-inset ring-border bg-white placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary text-sm">
                    </div>
                </div>

                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input id="remember-me" type="checkbox"
                               class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary">
                        <label for="remember-me" class="ml-2 block text-sm" data-translate="remember_me">Remember me</label>
                    </div>
                    <a href="#" class="text-sm font-semibold text-primary hover:text-primary/80" data-translate="forgot_password">Forgot password?</a>
                </div>

                <div class="space-y-3">
                    <button type="button" onclick="login('golfer')"
                            class="flex w-full justify-center rounded-md bg-primary px-3 py-3 text-sm font-semibold text-white shadow-sm hover:bg-primary-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"
                            data-translate="login_as_golfer">
                        Login as Golfer
                    </button>
                    <button type="button" onclick="login('caddie')"
                            class="flex w-full justify-center rounded-md bg-gray-600 px-3 py-3 text-sm font-semibold text-white shadow-sm hover:bg-gray-500"
                            data-translate="login_as_caddie">
                        Login as Caddie
                    </button>
                    <button type="button" onclick="login('manager')"
                            class="flex w-full justify-center rounded-md bg-orange-600 px-3 py-3 text-sm font-semibold text-white shadow-sm hover:bg-orange-500"
                            data-translate="login_as_manager">
                        Login as Manager
                    </button>
                    <button type="button" onclick="login('proshop')"
                            class="flex w-full justify-center rounded-md bg-purple-600 px-3 py-3 text-sm font-semibold text-white shadow-sm hover:bg-purple-500"
                            data-translate="login_as_proshop">
                        Login as Pro Shop
                    </button>
                </div>
            </form>

            <div class="mt-6 text-center">
                <button onclick="login('guest')" class="text-sm font-semibold text-primary hover:text-primary/80" data-translate="continue_as_guest">
                    Continue as Guest
                </button>
            </div>
        </div>
    </div>
</div>

<!-- GOLFER DASHBOARD -->
<div id="golferDashboard" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="logout()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">logout</span>
            </button>
            <h1 class="text-xl font-bold" data-translate="golfer_dashboard">Golfer Dashboard</h1>
            <select id="golferLanguageSelect" onchange="switchLanguage(this.value)"
                    class="text-xs rounded border px-2 py-1 bg-white">
                <option value="en">EN</option>
                <option value="th">TH</option>
                <option value="ko">KO</option>
                <option value="ja">JA</option>
            </select>
        </div>
        <nav class="border-b border-border">
            <div class="flex items-center justify-around px-2 text-sm font-semibold tab-nav">
                <a onclick="showGolferTab('overview', event)" class="px-3 py-3 text-primary border-b-2 border-primary cursor-pointer tab-active" id="overview-tab">Overview</a>
                <a onclick="showGolferTab('bookings', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer" id="bookings-tab">Bookings</a>
                <a onclick="showGolferTab('stats', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer" id="stats-tab">Stats</a>
                <a onclick="showGolferTab('events', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer" id="events-tab">Events</a>
            </div>
        </nav>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <!-- Overview Tab -->
        <div id="golfer-overview" class="tab-content">
            <section class="mb-8">
                <div class="flex items-center gap-4 p-4 tiffany-gradient rounded-lg">
                    <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
                        <span class="material-symbols-outlined text-2xl text-primary">person</span>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold">Welcome back, John!</h2>
                        <p class="text-gray-500">Member ID: #12345 • Handicap: 18</p>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4" data-translate="quick_actions">Quick Actions</h3>
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="showScreen('foodOrdering')" class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                        <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-3 mx-auto">
                            <span class="material-symbols-outlined text-primary">restaurant</span>
                        </div>
                        <h4 class="font-semibold">Order Food</h4>
                        <p class="text-sm text-gray-500">Browse menu & order</p>
                    </button>
                    <button onclick="bookCaddy()" class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                        <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-3 mx-auto">
                            <span class="material-symbols-outlined text-primary">person_add</span>
                        </div>
                        <h4 class="font-semibold">Book Caddy</h4>
                        <p class="text-sm text-gray-500">Reserve a caddy</p>
                    </button>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Upcoming Bookings</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Tee Time</h4>
                                <p class="text-sm text-gray-500">Today, 2:00 PM - Course A</p>
                                <p class="text-sm text-primary">Caddy: Ning</p>
                            </div>
                            <span class="material-symbols-outlined text-green-500">check_circle</span>
                        </div>
                    </div>
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Golf Lesson</h4>
                                <p class="text-sm text-gray-500">Tomorrow, 10:00 AM - Practice Range</p>
                                <p class="text-sm text-primary">Instructor: Sarah Wilson</p>
                            </div>
                            <span class="material-symbols-outlined text-orange-500">schedule</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Active Orders Section -->
            <section class="mb-8" id="golfer-active-orders">
                <h3 class="text-lg font-bold mb-4">Active Orders</h3>
                <div id="golfer-orders-container" class="space-y-3">
                    <!-- Orders will be populated here -->
                </div>
                <div id="golfer-no-orders" class="text-center py-6 tiffany-card rounded-lg border">
                    <span class="material-symbols-outlined text-4xl text-gray-300 mb-2 block">receipt</span>
                    <p class="text-gray-500">No active orders</p>
                </div>
            </section>

            <!-- Current Location & Hole -->
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Current Location</h3>
                <div class="tiffany-card p-4 rounded-lg border">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-primary">location_on</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Hole <span id="current-hole">7</span></h4>
                                <p class="text-sm text-gray-500">Course A • Par 4</p>
                            </div>
                        </div>
                        <button onclick="updateLocation('current')" class="bg-primary/10 text-primary px-3 py-2 rounded-lg text-sm font-medium">
                            Update GPS
                        </button>
                    </div>
                    <div class="bg-primary/5 rounded-lg p-3 mt-3">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="material-symbols-outlined text-primary text-sm">my_location</span>
                            <span class="text-sm font-medium">GPS Coordinates</span>
                        </div>
                        <p class="text-xs text-gray-600" id="player-coordinates">
                            Lat: <span id="player-lat">13.7563</span>, Lng: <span id="player-lng">100.5018</span>
                        </p>
                        <p class="text-xs text-gray-500 mt-1">Distance to pin: <span id="distance-to-pin">127 yards</span></p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Bookings Tab -->
        <div id="golfer-bookings" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">My Bookings</h3>
                <div class="space-y-4">
                    <div class="tiffany-card rounded-lg p-4 border">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-green-600">golf_course</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Tee Time Confirmed</h4>
                                    <p class="text-sm text-gray-500">Today, 2:00 PM - Course A</p>
                                    <p class="text-sm text-primary">Caddy: Ning</p>
                                </div>
                            </div>
                            <span class="px-3 py-1 bg-green-100 text-green-700 text-green-700 rounded-full text-sm font-medium">Confirmed</span>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="modifyBooking('today-2pm')" class="flex-1 bg-primary/10 text-primary px-3 py-2 rounded-lg text-sm font-medium">Modify</button>
                            <button onclick="cancelBooking('today-2pm')" class="flex-1 bg-red-100 text-red-600 px-3 py-2 rounded-lg text-sm font-medium">Cancel</button>
                        </div>
                    </div>

                    <div class="tiffany-card rounded-lg p-4 border">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-blue-100 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-blue-600">school</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Golf Lesson</h4>
                                    <p class="text-sm text-gray-500">Tomorrow, 10:00 AM - Practice Range</p>
                                    <p class="text-sm text-primary">Instructor: Pro Sarah</p>
                                </div>
                            </div>
                            <span class="px-3 py-1 bg-blue-100 bg-blue-100 text-blue-700 text-blue-700 rounded-full text-sm font-medium">Scheduled</span>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="modifyBooking('lesson-tomorrow')" class="flex-1 bg-primary/10 text-primary px-3 py-2 rounded-lg text-sm font-medium">Reschedule</button>
                            <button onclick="cancelBooking('lesson-tomorrow')" class="flex-1 bg-red-100 text-red-600 px-3 py-2 rounded-lg text-sm font-medium">Cancel</button>
                        </div>
                    </div>

                    <div class="tiffany-card rounded-lg p-4 border">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-orange-600">event</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Tournament Entry</h4>
                                    <p class="text-sm text-gray-500">Saturday, 8:00 AM - Championship Course</p>
                                    <p class="text-sm text-primary">Monthly Club Championship</p>
                                </div>
                            </div>
                            <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-medium">Registered</span>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="viewTournamentDetails()" class="flex-1 bg-primary/10 text-primary px-3 py-2 rounded-lg text-sm font-medium">Details</button>
                            <button onclick="withdrawTournament()" class="flex-1 bg-red-100 text-red-600 px-3 py-2 rounded-lg text-sm font-medium">Withdraw</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Quick Book</h3>
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="quickBookTeeTime()" class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                        <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-3 mx-auto">
                            <span class="material-symbols-outlined text-primary">golf_course</span>
                        </div>
                        <h4 class="font-semibold">Book Tee Time</h4>
                        <p class="text-sm text-gray-500">Reserve your slot</p>
                    </button>
                    <button onclick="bookLesson()" class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                        <div class="w-12 h-12 bg-blue-100 bg-blue-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                            <span class="material-symbols-outlined text-blue-600">school</span>
                        </div>
                        <h4 class="font-semibold">Book Lesson</h4>
                        <p class="text-sm text-gray-500">Schedule training</p>
                    </button>
                </div>
            </section>
        </div>

        <!-- Stats Tab -->
        <div id="golfer-stats" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Performance Overview</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="tiffany-gradient p-4 rounded-lg">
                        <div class="text-center">
                            <span class="text-3xl font-bold text-primary">18.2</span>
                            <p class="text-sm text-gray-500">Current Handicap</p>
                            <p class="text-xs text-green-600">↓ 0.3 this month</p>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-green-100 to-green-50 p-4 rounded-lg">
                        <div class="text-center">
                            <span class="text-3xl font-bold text-green-600">84</span>
                            <p class="text-sm text-gray-500">Best Score</p>
                            <p class="text-xs text-green-600">Last week</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Recent Rounds</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Course A</h4>
                                <p class="text-sm text-gray-500">Yesterday • Par 72</p>
                            </div>
                            <div class="text-right">
                                <span class="text-2xl font-bold text-primary">87</span>
                                <p class="text-sm text-gray-500">+15</p>
                            </div>
                        </div>
                    </div>
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Championship Course</h4>
                                <p class="text-sm text-gray-500">Last week • Par 72</p>
                            </div>
                            <div class="text-right">
                                <span class="text-2xl font-bold text-green-600">84</span>
                                <p class="text-sm text-green-600">+12 (Best)</p>
                            </div>
                        </div>
                    </div>
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Course B</h4>
                                <p class="text-sm text-gray-500">2 weeks ago • Par 70</p>
                            </div>
                            <div class="text-right">
                                <span class="text-2xl font-bold text-primary">79</span>
                                <p class="text-sm text-gray-500">+9</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Statistics Breakdown</h3>
                <div class="tiffany-card p-4 rounded-lg border space-y-4">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Average Score:</span>
                        <span class="font-semibold">86.7</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Fairways Hit:</span>
                        <span class="font-semibold">67%</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Greens in Regulation:</span>
                        <span class="font-semibold">45%</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Putting Average:</span>
                        <span class="font-semibold">32.1</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Rounds Played:</span>
                        <span class="font-semibold">24</span>
                    </div>
                </div>
            </section>
        </div>

        <!-- Events Tab -->
        <div id="golfer-events" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Upcoming Events</h3>
                <div class="space-y-4">
                    <div class="tiffany-gradient rounded-lg p-4 border">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-primary">emoji_events</span>
                                </div>
                                <div>
                                    <h4 class="font-bold">Monthly Club Championship</h4>
                                    <p class="text-sm text-gray-600">Saturday, Dec 23 • 8:00 AM</p>
                                    <p class="text-sm text-primary">Registration closes in 2 days</p>
                                </div>
                            </div>
                            <button onclick="registerEvent('championship')" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">Register</button>
                        </div>
                        <p class="text-sm text-gray-500">18-hole stroke play tournament. Winner receives club trophy and ฿10,000 prize.</p>
                    </div>

                    <div class="tiffany-card rounded-lg p-4 border">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-blue-100 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-blue-600">groups</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">New Year Scramble</h4>
                                    <p class="text-sm text-gray-500">January 1 • 10:00 AM</p>
                                    <p class="text-sm text-blue-600">Teams of 4 • Fun format</p>
                                </div>
                            </div>
                            <button onclick="registerEvent('scramble')" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold">Join</button>
                        </div>
                        <p class="text-sm text-gray-500">Friendly team competition to start the new year. Breakfast included!</p>
                    </div>

                    <div class="tiffany-card rounded-lg p-4 border">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-green-600">school</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Pro Clinic Series</h4>
                                    <p class="text-sm text-gray-500">Every Thursday • 4:00 PM</p>
                                    <p class="text-sm text-green-600">Improve your game</p>
                                </div>
                            </div>
                            <button onclick="registerEvent('clinic')" class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold">Enroll</button>
                        </div>
                        <p class="text-sm text-gray-500">Weekly group lessons focusing on different aspects of the game.</p>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">My Event History</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">November Tournament</h4>
                                <p class="text-sm text-gray-500">Completed • 3rd Place</p>
                                <p class="text-sm text-green-600">Score: 87 (+15)</p>
                            </div>
                            <div class="text-right">
                                <span class="px-3 py-1 bg-green-100 text-green-700 text-green-700 rounded-full text-sm font-medium">Placed</span>
                            </div>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Charity Scramble</h4>
                                <p class="text-sm text-gray-500">Last month • Team event</p>
                                <p class="text-sm text-primary">Raised ฿15,000 for charity</p>
                            </div>
                            <div class="text-right">
                                <span class="px-3 py-1 bg-blue-100 bg-blue-100 text-blue-700 text-blue-700 rounded-full text-sm font-medium">Completed</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="sticky bottom-0 bg-white/95 backdrop-blur-sm border-t border-border shadow-lg">
        <nav class="flex justify-around p-3 safe-bottom">
            <a class="flex flex-col items-center justify-center gap-1 w-1/4 text-primary">
                <span class="material-symbols-outlined fill">home</span>
                <span class="text-xs font-medium">Home</span>
            </a>
            <a onclick="showScreen('foodOrdering')" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">restaurant</span>
                <span class="text-xs font-medium">Food</span>
                <span id="cart-badge" class="hidden absolute -top-2 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center"></span>
            </a>
            <a onclick="showScreen('orderTracking')" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">location_on</span>
                <span class="text-xs font-medium">Track Order</span>
            </a>
            <a onclick="showScreen('golferProfile')" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">person</span>
                <span class="text-xs font-medium">Profile</span>
            </a>
        </nav>
    </footer>
</div>

<!-- FOOD ORDERING SCREEN -->
<div id="foodOrdering" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="goBack()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1 class="text-xl font-bold">Food & Beverage</h1>
            <button onclick="showScreen('foodCart')" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100 relative">
                <span class="material-symbols-outlined">shopping_cart</span>
                <span id="cart-badge-header" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center"></span>
            </button>
        </div>
        <nav class="border-b border-border">
            <div class="flex items-center justify-around px-2 text-sm font-semibold tab-nav">
                <a onclick="showFoodCategory('burgers')" class="px-3 py-3 text-primary border-b-2 border-primary cursor-pointer whitespace-nowrap">Burgers</a>
                <a onclick="showFoodCategory('pizza')" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer whitespace-nowrap">Pizza</a>
                <a onclick="showFoodCategory('salads')" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer whitespace-nowrap">Salads</a>
                <a onclick="showFoodCategory('beverages')" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer whitespace-nowrap">Beverages</a>
            </div>
        </nav>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <section class="space-y-4">
            <!-- BURGERS -->
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=200&h=200&fit=crop&crop=center" alt="Classic Burger" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Classic Burger</h4>
                        <p class="text-sm text-gray-500">Beef patty, lettuce, tomato, cheese, pickles</p>
                        <p class="text-lg font-bold text-primary">฿280</p>
                    </div>
                    <button onclick="addToCart('Classic Burger', 280)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1551782450-a2132b4ba21d?w=200&h=200&fit=crop&crop=center" alt="BBQ Bacon Burger" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">BBQ Bacon Burger</h4>
                        <p class="text-sm text-gray-500">Double beef, crispy bacon, BBQ sauce, onions</p>
                        <p class="text-lg font-bold text-primary">฿380</p>
                    </div>
                    <button onclick="addToCart('BBQ Bacon Burger', 380)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1572802419224-296b0aeee0d9?w=200&h=200&fit=crop&crop=center" alt="Chicken Burger" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Grilled Chicken Burger</h4>
                        <p class="text-sm text-gray-500">Grilled chicken breast, avocado, mayo</p>
                        <p class="text-lg font-bold text-primary">฿320</p>
                    </div>
                    <button onclick="addToCart('Grilled Chicken Burger', 320)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <!-- PIZZA -->
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=200&h=200&fit=crop&crop=center" alt="Margherita Pizza" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Margherita Pizza</h4>
                        <p class="text-sm text-gray-500">Fresh mozzarella, tomatoes, basil</p>
                        <p class="text-lg font-bold text-primary">฿420</p>
                    </div>
                    <button onclick="addToCart('Margherita Pizza', 420)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="./pepperonipizza.jpg" alt="Pepperoni Pizza" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Pepperoni Pizza</h4>
                        <p class="text-sm text-gray-500">Classic pepperoni with mozzarella</p>
                        <p class="text-lg font-bold text-primary">฿480</p>
                    </div>
                    <button onclick="addToCart('Pepperoni Pizza', 480)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=200&h=200&fit=crop&crop=center" alt="Supreme Pizza" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Supreme Pizza</h4>
                        <p class="text-sm text-gray-500">Pepperoni, mushrooms, peppers, olives</p>
                        <p class="text-lg font-bold text-primary">฿540</p>
                    </div>
                    <button onclick="addToCart('Supreme Pizza', 540)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <!-- SALADS -->
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1546793665-c74683f339c1?w=200&h=200&fit=crop&crop=center" alt="Caesar Salad" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Caesar Salad</h4>
                        <p class="text-sm text-gray-500">Romaine lettuce, croutons, parmesan</p>
                        <p class="text-lg font-bold text-primary">฿220</p>
                    </div>
                    <button onclick="addToCart('Caesar Salad', 220)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=200&h=200&fit=crop&crop=center" alt="Greek Salad" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Greek Salad</h4>
                        <p class="text-sm text-gray-500">Feta cheese, olives, tomatoes, cucumber</p>
                        <p class="text-lg font-bold text-primary">฿260</p>
                    </div>
                    <button onclick="addToCart('Greek Salad', 260)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?w=200&h=200&fit=crop&crop=center" alt="Grilled Chicken Salad" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Grilled Chicken Salad</h4>
                        <p class="text-sm text-gray-500">Mixed greens, grilled chicken, avocado</p>
                        <p class="text-lg font-bold text-primary">฿320</p>
                    </div>
                    <button onclick="addToCart('Grilled Chicken Salad', 320)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <!-- THAI SPECIALTIES -->
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1559847844-d05b99dcc9ab?w=200&h=200&fit=crop&crop=center" alt="Pad Thai" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Pad Thai</h4>
                        <p class="text-sm text-gray-500">Traditional stir-fried noodles with shrimp</p>
                        <p class="text-lg font-bold text-primary">฿280</p>
                    </div>
                    <button onclick="addToCart('Pad Thai', 280)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1562565652-a0d8f0c59eb4?w=200&h=200&fit=crop&crop=center" alt="Green Curry" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Green Curry Chicken</h4>
                        <p class="text-sm text-gray-500">Spicy green curry with coconut milk</p>
                        <p class="text-lg font-bold text-primary">฿320</p>
                    </div>
                    <button onclick="addToCart('Green Curry Chicken', 320)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1596040033229-a9821ebd058d?w=200&h=200&fit=crop&crop=center" alt="Tom Yum" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Tom Yum Soup</h4>
                        <p class="text-sm text-gray-500">Spicy and sour soup with shrimp</p>
                        <p class="text-lg font-bold text-primary">฿180</p>
                    </div>
                    <button onclick="addToCart('Tom Yum Soup', 180)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <!-- SANDWICHES & WRAPS -->
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1509722747041-616f39b57569?w=200&h=200&fit=crop&crop=center" alt="Club Sandwich" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Club Sandwich</h4>
                        <p class="text-sm text-gray-500">Triple-decker with turkey, bacon, lettuce</p>
                        <p class="text-lg font-bold text-primary">฿240</p>
                    </div>
                    <button onclick="addToCart('Club Sandwich', 240)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1626700051175-6818013e1d4f?w=200&h=200&fit=crop&crop=center" alt="Chicken Wrap" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Chicken Caesar Wrap</h4>
                        <p class="text-sm text-gray-500">Grilled chicken, caesar dressing, tortilla</p>
                        <p class="text-lg font-bold text-primary">฿200</p>
                    </div>
                    <button onclick="addToCart('Chicken Caesar Wrap', 200)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <!-- DESSERTS -->
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?w=200&h=200&fit=crop&crop=center" alt="Chocolate Cake" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Chocolate Cake</h4>
                        <p class="text-sm text-gray-500">Rich chocolate cake with ganache</p>
                        <p class="text-lg font-bold text-primary">฿150</p>
                    </div>
                    <button onclick="addToCart('Chocolate Cake', 150)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1551024506-0bccd828d307?w=200&h=200&fit=crop&crop=center" alt="Ice Cream" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Vanilla Ice Cream</h4>
                        <p class="text-sm text-gray-500">Premium vanilla with chocolate sauce</p>
                        <p class="text-lg font-bold text-primary">฿120</p>
                    </div>
                    <button onclick="addToCart('Vanilla Ice Cream', 120)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <!-- BEVERAGES -->
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1613478223719-2ab802602423?w=200&h=200&fit=crop&crop=center" alt="Fresh Orange Juice" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Fresh Orange Juice</h4>
                        <p class="text-sm text-gray-500">100% natural orange juice</p>
                        <p class="text-lg font-bold text-primary">฿120</p>
                    </div>
                    <button onclick="addToCart('Fresh Orange Juice', 120)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1461023058943-07fcbe16d735?w=200&h=200&fit=crop&crop=center" alt="Premium Coffee" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Premium Coffee</h4>
                        <p class="text-sm text-gray-500">Arabica beans, expertly roasted</p>
                        <p class="text-lg font-bold text-primary">฿85</p>
                    </div>
                    <button onclick="addToCart('Premium Coffee', 85)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1544145945-f90425340c7e?w=200&h=200&fit=crop&crop=center" alt="Iced Tea" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Thai Iced Tea</h4>
                        <p class="text-sm text-gray-500">Traditional Thai tea with condensed milk</p>
                        <p class="text-lg font-bold text-primary">฿95</p>
                    </div>
                    <button onclick="addToCart('Thai Iced Tea', 95)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="https://images.unsplash.com/photo-1622597467836-f3285f2131b8?w=200&h=200&fit=crop&crop=center" alt="Coconut Water" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Fresh Coconut Water</h4>
                        <p class="text-sm text-gray-500">Natural coconut water, refreshing</p>
                        <p class="text-lg font-bold text-primary">฿80</p>
                    </div>
                    <button onclick="addToCart('Fresh Coconut Water', 80)" class="bg-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Add
                    </button>
                </div>
            </div>

            <!-- BEER SECTION -->
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="./singhabeer.jpg" alt="Singha Beer" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Singha Beer</h4>
                        <p class="text-sm text-gray-500">Thai premium lager beer</p>
                        <div class="flex gap-2 mt-2">
                            <div class="text-sm">
                                <span class="text-primary font-semibold">Small ฿140</span>
                                <button onclick="addToCart('Singha Beer (Small)', 140)" class="ml-2 bg-primary/10 text-primary px-2 py-1 rounded text-xs">Add</button>
                            </div>
                            <div class="text-sm">
                                <span class="text-primary font-semibold">Large ฿200</span>
                                <button onclick="addToCart('Singha Beer (Large)', 200)" class="ml-2 bg-primary/10 text-primary px-2 py-1 rounded text-xs">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="./changbeer.jpg" alt="Chang Beer" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Chang Beer</h4>
                        <p class="text-sm text-gray-500">Classic Thai beer</p>
                        <div class="flex gap-2 mt-2">
                            <div class="text-sm">
                                <span class="text-primary font-semibold">Small ฿120</span>
                                <button onclick="addToCart('Chang Beer (Small)', 120)" class="ml-2 bg-primary/10 text-primary px-2 py-1 rounded text-xs">Add</button>
                            </div>
                            <div class="text-sm">
                                <span class="text-primary font-semibold">Large ฿180</span>
                                <button onclick="addToCart('Chang Beer (Large)', 180)" class="ml-2 bg-primary/10 text-primary px-2 py-1 rounded text-xs">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center gap-4">
                    <img src="./heinekenbeer.jpg" alt="Heineken Beer" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="font-semibold">Heineken Beer</h4>
                        <p class="text-sm text-gray-500">Premium international lager</p>
                        <div class="flex gap-2 mt-2">
                            <div class="text-sm">
                                <span class="text-primary font-semibold">Small ฿160</span>
                                <button onclick="addToCart('Heineken Beer (Small)', 160)" class="ml-2 bg-primary/10 text-primary px-2 py-1 rounded text-xs">Add</button>
                            </div>
                            <div class="text-sm">
                                <span class="text-primary font-semibold">Large ฿220</span>
                                <button onclick="addToCart('Heineken Beer (Large)', 220)" class="ml-2 bg-primary/10 text-primary px-2 py-1 rounded text-xs">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- SHOPPING CART SCREEN -->
<div id="foodCart" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="goBack()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1 class="text-xl font-bold">Shopping Cart</h1>
            <div class="w-10 h-10"></div>
        </div>
    </header>

    <main class="flex-1 px-4 py-6 pb-32">
        <div id="cart-items" class="space-y-4 mb-8">
            <!-- Cart items will be populated by JavaScript -->
        </div>

        <div id="empty-cart" class="text-center py-12">
            <span class="material-symbols-outlined text-6xl text-gray-300 mb-4">shopping_cart</span>
            <h3 class="text-lg font-semibold mb-2">Your cart is empty</h3>
            <p class="text-gray-500 mb-6">Add some delicious items to get started!</p>
            <button onclick="showScreen('foodOrdering')" class="bg-primary text-white px-6 py-3 rounded-lg font-semibold">
                Browse Menu
            </button>
        </div>
    </main>

    <div id="cart-footer" class="hidden fixed bottom-0 left-0 right-0 tiffany-card border-t border-border p-4">
        <div class="space-y-4">
            <div class="flex justify-between items-center">
                <span class="text-lg font-semibold">Total:</span>
                <span id="cart-total" class="text-xl font-bold text-primary">฿0</span>
            </div>
            <button onclick="showScreen('checkout')" class="w-full bg-primary text-white py-3 rounded-lg font-semibold">
                Proceed to Checkout
            </button>
        </div>
    </div>
</div>

<!-- CHECKOUT SCREEN -->
<div id="checkout" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="goBack()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1 class="text-xl font-bold">Checkout</h1>
            <div class="w-10 h-10"></div>
        </div>
    </header>

    <main class="flex-1 px-4 py-6 pb-32">
        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Delivery Options</h3>
            <div class="space-y-3">
                <label class="flex items-center p-4 tiffany-card rounded-lg border cursor-pointer">
                    <input type="radio" name="delivery" value="table" class="mr-3" checked>
                    <div>
                        <h4 class="font-semibold">Table Service</h4>
                        <p class="text-sm text-gray-500">Delivered to your table • 15-20 min</p>
                    </div>
                </label>
                <label class="flex items-center p-4 tiffany-card rounded-lg border cursor-pointer">
                    <input type="radio" name="delivery" value="pickup" class="mr-3">
                    <div>
                        <h4 class="font-semibold">Pickup</h4>
                        <p class="text-sm text-gray-500">Collect from counter • 10-15 min</p>
                    </div>
                </label>
                <label class="flex items-center p-4 tiffany-card rounded-lg border cursor-pointer">
                    <input type="radio" name="delivery" value="cart" class="mr-3">
                    <div>
                        <h4 class="font-semibold">Golf Cart Service</h4>
                        <p class="text-sm text-gray-500">Delivered to your location on course • 20-25 min</p>
                    </div>
                </label>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Payment Method</h3>
            <div class="space-y-3">
                <label class="flex items-center p-4 tiffany-card rounded-lg border cursor-pointer">
                    <input type="radio" name="payment" value="member" class="mr-3" checked>
                    <div>
                        <h4 class="font-semibold">Member Account</h4>
                        <p class="text-sm text-gray-500">Charge to membership account</p>
                    </div>
                </label>
                <label class="flex items-center p-4 tiffany-card rounded-lg border cursor-pointer">
                    <input type="radio" name="payment" value="card" class="mr-3">
                    <div>
                        <h4 class="font-semibold">Credit Card</h4>
                        <p class="text-sm text-gray-500">Pay with credit/debit card</p>
                    </div>
                </label>
                <label class="flex items-center p-4 tiffany-card rounded-lg border cursor-pointer">
                    <input type="radio" name="payment" value="cash" class="mr-3">
                    <div>
                        <h4 class="font-semibold">Cash</h4>
                        <p class="text-sm text-gray-500">Pay upon delivery</p>
                    </div>
                </label>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Special Instructions</h3>
            <textarea placeholder="Any special requests or dietary requirements..."
                      class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 tiffany-card"
                      rows="3"></textarea>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Order Summary</h3>
            <div class="tiffany-card rounded-lg p-4 border space-y-2">
                <div class="flex justify-between">
                    <span>Subtotal:</span>
                    <span id="checkout-subtotal">฿0</span>
                </div>
                <div class="flex justify-between">
                    <span>Service charge (10%):</span>
                    <span id="checkout-service">฿0</span>
                </div>
                <div class="flex justify-between">
                    <span>Tax (7%):</span>
                    <span id="checkout-tax">฿0</span>
                </div>
                <div class="border-t border-border pt-2">
                    <div class="flex justify-between font-bold text-lg">
                        <span>Total:</span>
                        <span id="checkout-total" class="text-primary">฿0</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="fixed bottom-0 left-0 right-0 tiffany-card border-t border-border p-4">
        <button onclick="placeOrder()" class="w-full bg-primary text-white py-3 rounded-lg font-semibold">
            Place Order
        </button>
    </div>
</div>

<!-- ORDER TRACKING SCREEN -->
<div id="orderTracking" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="goBack()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1 class="text-xl font-bold">Track Your Order</h1>
            <div class="w-10 h-10"></div>
        </div>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <div id="active-orders" class="space-y-4">
            <!-- Orders will be populated here -->
        </div>

        <div id="no-orders" class="text-center py-12">
            <span class="material-symbols-outlined text-6xl text-gray-300 mb-4 block">restaurant</span>
            <h3 class="text-lg font-semibold text-gray-500 mb-2">No Active Orders</h3>
            <p class="text-sm text-gray-400 mb-6">Place an order to start tracking</p>
            <button onclick="showScreen('foodOrdering')" class="bg-primary text-white px-6 py-3 rounded-lg font-semibold">
                Order Food
            </button>
        </div>
    </main>
</div>


<!-- CADDIE DASHBOARD -->
<div id="caddieDashboard" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="logout()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">logout</span>
            </button>
            <h1 class="text-xl font-bold" data-translate="caddie_dashboard">Caddie Dashboard</h1>
            <select id="caddieLanguageSelect" onchange="switchLanguage(this.value)"
                    class="text-xs rounded border px-2 py-1 bg-white">
                <option value="en">EN</option>
                <option value="th">TH</option>
                <option value="ko">KO</option>
                <option value="ja">JA</option>
            </select>
        </div>
        <nav class="border-b border-border">
            <div class="flex items-center justify-around px-2 text-sm font-semibold tab-nav">
                <a onclick="showCaddieTab('assignments', event)" class="px-3 py-3 text-primary border-b-2 border-primary cursor-pointer">Assignments</a>
                <a onclick="showCaddieTab('communication', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer">Chat</a>
                <a onclick="showCaddieTab('schedule', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer">Schedule</a>
            </div>
        </nav>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <!-- Assignments Tab -->
        <div id="caddie-assignments" class="tab-content">
        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Current Assignment</h3>
            <div class="tiffany-gradient rounded-lg p-4">
                <div class="flex items-center gap-4">
                    <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
                        <span class="material-symbols-outlined text-2xl text-primary">person</span>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold">John Mitchell</h4>
                        <p class="text-sm text-gray-600">Course A • Tee Time: 2:00 PM</p>
                        <p class="text-sm text-primary">Hole 7 • Started 1:45 PM • Caddie: Ning</p>
                    </div>
                    <div class="text-right">
                        <span class="text-green-500 font-semibold">Active</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- GPS Round Control -->
        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Round Control</h3>
            <button onclick="toggleRound()" class="w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-3 transition-all" id="round-btn">
                <span class="material-symbols-outlined text-2xl" id="round-icon">play_arrow</span>
                <span id="round-text" data-translate="start_round">Start Round</span>
            </button>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Quick Actions</h3>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="reportIssue()" class="tiffany-card p-4 rounded-lg border hover:bg-red-50">
                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-red-600">warning</span>
                    </div>
                    <h4 class="font-semibold" data-translate="report_issue">Report Issue</h4>
                    <p class="text-sm text-gray-500">Course or equipment</p>
                </button>
                <button onclick="requestBreak()" class="tiffany-card p-4 rounded-lg border hover:bg-blue-50">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-blue-600">coffee</span>
                    </div>
                    <h4 class="font-semibold">Request Break</h4>
                    <p class="text-sm text-gray-500">15 min break</p>
                </button>
            </div>
        </section>

        <!-- Active Reports Tracking -->
        <section class="mb-8" id="active-reports-section">
            <h3 class="text-lg font-bold mb-4" data-translate="active_reports">My Reports Status</h3>
            <div id="activeReports" class="space-y-3">
                <p class="text-gray-500 text-center py-4" data-translate="no_active_reports">No active reports</p>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Communication Hub</h3>
            <div class="space-y-3">
                <button onclick="openChat('Caddy Master')" class="w-full flex items-center gap-4 p-4 tiffany-card rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                        <span class="material-symbols-outlined text-primary">support_agent</span>
                    </div>
                    <div class="flex-1 text-left">
                        <h4 class="font-semibold">Caddy Master</h4>
                        <p class="text-sm text-gray-500">Available now</p>
                    </div>
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                </button>

                <button onclick="openChat('General Manager')" class="w-full flex items-center gap-4 p-4 tiffany-card rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                        <span class="material-symbols-outlined text-orange-600">admin_panel_settings</span>
                    </div>
                    <div class="flex-1 text-left">
                        <h4 class="font-semibold">General Manager</h4>
                        <p class="text-sm text-gray-500">Available for urgent matters</p>
                    </div>
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                </button>

                <button onclick="openChat('Pro Shop')" class="w-full flex items-center gap-4 p-4 tiffany-card rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                        <span class="material-symbols-outlined text-purple-600">store</span>
                    </div>
                    <div class="flex-1 text-left">
                        <h4 class="font-semibold">Pro Shop</h4>
                        <p class="text-sm text-gray-500">Equipment & merchandise</p>
                    </div>
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                </button>

                <button onclick="openChat('Maintenance')" class="w-full flex items-center gap-4 p-4 tiffany-card rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <span class="material-symbols-outlined text-green-600">handyman</span>
                    </div>
                    <div class="flex-1 text-left">
                        <h4 class="font-semibold">Maintenance</h4>
                        <p class="text-sm text-gray-500">Course maintenance issues</p>
                    </div>
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                </button>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Today's Schedule</h3>
            <div class="space-y-3">
                <div class="tiffany-card p-4 rounded-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold">John Mitchell</h4>
                            <p class="text-sm text-gray-500">2:00 PM - Course A</p>
                            <p class="text-sm text-primary">Current • ฿800 expected</p>
                        </div>
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">Active</span>
                    </div>
                </div>

                <div class="tiffany-card p-4 rounded-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold">Robert Chen</h4>
                            <p class="text-sm text-gray-500">4:30 PM - Course B</p>
                            <p class="text-sm text-gray-600">Upcoming • ฿1,000 expected</p>
                        </div>
                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">Upcoming</span>
                    </div>
                </div>
            </div>
        </section>
        </div>

        <!-- Communication Tab -->
        <div id="caddie-communication" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Messages</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg">
                        <div class="flex items-start gap-3">
                            <div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center">
                                <span class="material-symbols-outlined text-primary text-sm">support_agent</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-1">
                                    <h4 class="font-semibold text-sm">Caddy Master</h4>
                                    <span class="text-xs text-gray-500">2 min ago</span>
                                </div>
                                <p class="text-sm text-gray-700">Please update your location when you reach hole 9.</p>
                            </div>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg">
                        <div class="flex items-start gap-3">
                            <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center">
                                <span class="material-symbols-outlined text-orange-600 text-sm">admin_panel_settings</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-1">
                                    <h4 class="font-semibold text-sm">General Manager</h4>
                                    <span class="text-xs text-gray-500">1 hour ago</span>
                                </div>
                                <p class="text-sm text-gray-700">Great work today! Customer feedback has been excellent.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Send Message</h3>
                <div class="tiffany-card p-4 rounded-lg">
                    <select class="w-full p-3 border border-gray-300 rounded-lg mb-3">
                        <option>Select recipient...</option>
                        <option>Caddy Master</option>
                        <option>General Manager</option>
                        <option>Pro Shop</option>
                        <option>Maintenance</option>
                    </select>
                    <textarea placeholder="Type your message..." class="w-full p-3 border border-gray-300 rounded-lg mb-3" rows="3"></textarea>
                    <button onclick="sendMessage()" class="w-full bg-primary text-white py-2 rounded-lg font-semibold hover:bg-primary-dark">
                        Send Message
                    </button>
                </div>
            </section>
        </div>

        <!-- Schedule Tab -->
        <div id="caddie-schedule" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Detailed Schedule</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border-l-4 border-l-green-500">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold text-green-700">COMPLETED</h4>
                            <span class="text-sm text-gray-500">9:00 AM - 12:30 PM</span>
                        </div>
                        <p class="font-medium">Robert Chen - Course B</p>
                        <p class="text-sm text-gray-600">18 holes, Par 72</p>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-sm text-gray-500">Tips earned:</span>
                            <span class="font-semibold text-green-600">฿450</span>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border-l-4 border-l-primary">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold text-primary">CURRENT</h4>
                            <span class="text-sm text-gray-500">2:00 PM - 5:30 PM</span>
                        </div>
                        <p class="font-medium">John Mitchell - Course A</p>
                        <p class="text-sm text-gray-600">Currently on Hole 7</p>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-sm text-gray-500">Expected tips:</span>
                            <span class="font-semibold text-primary">฿800</span>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border-l-4 border-l-blue-500">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold text-blue-600">UPCOMING</h4>
                            <span class="text-sm text-gray-500">6:00 PM - 8:00 PM</span>
                        </div>
                        <p class="font-medium">Sarah & Mike - Sunset Round</p>
                        <p class="text-sm text-gray-600">9 holes, Course A</p>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-sm text-gray-500">Expected tips:</span>
                            <span class="font-semibold text-blue-600">฿300</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Daily Summary</h3>
                <div class="tiffany-card p-4 rounded-lg">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center">
                            <span class="text-2xl font-bold text-primary">3</span>
                            <p class="text-sm text-gray-600">Rounds Today</p>
                        </div>
                        <div class="text-center">
                            <span class="text-2xl font-bold text-green-600">฿1,550</span>
                            <p class="text-sm text-gray-600">Total Tips</p>
                        </div>
                        <div class="text-center">
                            <span class="text-2xl font-bold text-blue-600">8.5</span>
                            <p class="text-sm text-gray-600">Hours Worked</p>
                        </div>
                        <div class="text-center">
                            <span class="text-2xl font-bold text-orange-600">4.9</span>
                            <p class="text-sm text-gray-600">Avg Rating</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="sticky bottom-0 bg-white/90 backdrop-blur-sm border-t border-border">
        <nav class="flex justify-around p-2">
            <a class="flex flex-col items-center justify-center gap-1 w-1/4 text-primary">
                <span class="material-symbols-outlined fill">assignment</span>
                <span class="text-xs font-medium">Assignments</span>
            </a>
            <a onclick="showScreen('foodOrdering')" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">restaurant</span>
                <span class="text-xs font-medium">Order</span>
            </a>
            <a onclick="showScreen('caddieLocation')" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">location_on</span>
                <span class="text-xs font-medium">Location</span>
            </a>
            <a onclick="showScreen('caddieProfile')" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">person</span>
                <span class="text-xs font-medium">Profile</span>
            </a>
        </nav>
    </footer>
</div>

<!-- REPORT ISSUE MODAL -->
<div id="reportIssueModal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" style="display: none;">
    <div class="bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-hidden">
        <div class="bg-red-600 text-white p-4">
            <div class="flex items-center justify-between">
                <h2 class="text-xl font-bold" data-translate="report_issue">Report Issue</h2>
                <button onclick="closeReportModal()" class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center">
                    <span class="material-symbols-outlined text-sm">close</span>
                </button>
            </div>
        </div>

        <div class="p-4 space-y-4 max-h-[60vh] overflow-y-auto">
            <!-- Issue Type Selection -->
            <div>
                <h3 class="font-semibold mb-3" data-translate="issue_type">Select Issue Type:</h3>
                <div class="space-y-2">
                    <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50" onclick="selectIssueType('cart')">
                        <input type="radio" name="issueType" value="cart" class="mr-3">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-orange-600">electric_car</span>
                            <div>
                                <div class="font-medium" data-translate="cart_battery">Cart Battery Issue</div>
                                <div class="text-sm text-gray-500">Golf cart needs charging/repair</div>
                            </div>
                        </div>
                    </label>

                    <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50" onclick="selectIssueType('medical')">
                        <input type="radio" name="issueType" value="medical" class="mr-3">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-red-600">medical_services</span>
                            <div>
                                <div class="font-medium" data-translate="medical_emergency">Golfer Injured - Send Medical</div>
                                <div class="text-sm text-gray-500">Medical assistance required</div>
                            </div>
                        </div>
                    </label>

                    <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50" onclick="selectIssueType('course')">
                        <input type="radio" name="issueType" value="course" class="mr-3">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-yellow-600">landscape</span>
                            <div>
                                <div class="font-medium" data-translate="course_damage">Course Damage</div>
                                <div class="text-sm text-gray-500">Damaged tee, green, or course area</div>
                            </div>
                        </div>
                    </label>

                    <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50" onclick="selectIssueType('marshall')">
                        <input type="radio" name="issueType" value="marshall" class="mr-3">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-blue-600">security</span>
                            <div>
                                <div class="font-medium" data-translate="request_marshall">Request Marshall</div>
                                <div class="text-sm text-gray-500">Need course marshall assistance</div>
                            </div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Hole Number Selection -->
            <div>
                <h3 class="font-semibold mb-3" data-translate="hole_number">Select Hole Number:</h3>
                <div class="grid grid-cols-6 gap-2">
                    <button onclick="selectHole(1)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">1</button>
                    <button onclick="selectHole(2)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">2</button>
                    <button onclick="selectHole(3)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">3</button>
                    <button onclick="selectHole(4)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">4</button>
                    <button onclick="selectHole(5)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">5</button>
                    <button onclick="selectHole(6)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">6</button>
                    <button onclick="selectHole(7)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">7</button>
                    <button onclick="selectHole(8)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">8</button>
                    <button onclick="selectHole(9)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">9</button>
                    <button onclick="selectHole(10)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">10</button>
                    <button onclick="selectHole(11)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">11</button>
                    <button onclick="selectHole(12)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">12</button>
                    <button onclick="selectHole(13)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">13</button>
                    <button onclick="selectHole(14)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">14</button>
                    <button onclick="selectHole(15)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">15</button>
                    <button onclick="selectHole(16)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">16</button>
                    <button onclick="selectHole(17)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">17</button>
                    <button onclick="selectHole(18)" class="hole-btn p-2 border rounded-lg text-center hover:bg-primary hover:text-white transition-colors">18</button>
                </div>
            </div>

            <!-- Additional Comments -->
            <div>
                <h3 class="font-semibold mb-3">Additional Details (Optional):</h3>
                <textarea id="issueComments" placeholder="Add any additional information..."
                    class="w-full p-3 border rounded-lg resize-none h-20"></textarea>
            </div>
        </div>

        <div class="p-4 border-t bg-gray-50">
            <div class="flex gap-3">
                <button onclick="closeReportModal()" class="flex-1 py-3 px-4 border border-gray-300 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                    Cancel
                </button>
                <button onclick="submitIssueReport()" class="flex-1 py-3 px-4 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors" id="submit-btn" disabled data-translate="submit_report">
                    Submit Report
                </button>
            </div>
        </div>
    </div>
</div>

<!-- MANAGER DASHBOARD -->
<div id="managerDashboard" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="logout()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">logout</span>
            </button>
            <h1 class="text-xl font-bold" data-translate="manager_dashboard">Manager Dashboard</h1>
            <select id="managerLanguageSelect" onchange="switchLanguage(this.value)"
                    class="text-xs rounded border px-2 py-1 bg-white">
                <option value="en">EN</option>
                <option value="th">TH</option>
                <option value="ko">KO</option>
                <option value="ja">JA</option>
            </select>
        </div>
        <nav class="border-b border-border">
            <div class="flex items-center justify-around px-2 text-sm font-semibold tab-nav">
                <a onclick="showManagerTab('overview', event)" class="px-3 py-3 text-primary border-b-2 border-primary cursor-pointer">Overview</a>
                <a onclick="showManagerTab('staff', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer">Staff</a>
                <a onclick="showManagerTab('reports', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer">Reports</a>
                <a onclick="showManagerTab('alerts', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer">Alerts</a>
            </div>
        </nav>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <!-- Overview Tab -->
        <div id="manager-overview" class="tab-content">
        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Today's Overview</h3>
            <div class="grid grid-cols-2 gap-4">
                <div class="tiffany-gradient p-4 rounded-lg">
                    <div class="flex items-center justify-between mb-2">
                        <span class="material-symbols-outlined text-primary">golf_course</span>
                        <span class="text-2xl font-bold text-primary">47</span>
                    </div>
                    <h4 class="font-semibold">Today's Rounds</h4>
                    <p class="text-sm text-gray-500">+12% from yesterday</p>
                </div>

                <div class="bg-gradient-to-br from-green-100 to-green-50 p-4 rounded-lg">
                    <div class="flex items-center justify-between mb-2">
                        <span class="material-symbols-outlined text-green-600">payments</span>
                        <span class="text-2xl font-bold text-green-600">฿85k</span>
                    </div>
                    <h4 class="font-semibold">Daily Revenue</h4>
                    <p class="text-sm text-gray-500">+8% from yesterday</p>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Active Alerts</h3>
            <div class="space-y-3">
                <div onclick="showAlert('emergency')" class="bg-red-50 border border-red-200 p-4 rounded-lg cursor-pointer">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-red-600">emergency</span>
                        <div>
                            <h4 class="font-semibold text-red-700">Medical Emergency</h4>
                            <p class="text-sm text-red-600">Hole 12 - Ambulance dispatched</p>
                        </div>
                    </div>
                </div>

                <div onclick="showAlert('weather')" class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg cursor-pointer">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-yellow-600">thunderstorm</span>
                        <div>
                            <h4 class="font-semibold text-yellow-700">Weather Warning</h4>
                            <p class="text-sm text-yellow-600">Thunderstorm approaching in 30min</p>
                        </div>
                    </div>
                </div>

                <div onclick="showAlert('maintenance')" class="bg-orange-50 border border-orange-200 p-4 rounded-lg cursor-pointer">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-orange-600">build</span>
                        <div>
                            <h4 class="font-semibold text-orange-700">Maintenance Required</h4>
                            <p class="text-sm text-orange-600">Golf cart #7 needs repair</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Staff Management</h3>
            <div class="space-y-3">
                <div class="tiffany-card p-4 rounded-lg border">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold">Active Caddies</h4>
                            <p class="text-sm text-gray-500">12 active • 3 on break • 2 available</p>
                        </div>
                        <button onclick="assignCaddy('next')" class="px-4 py-2 bg-primary/10 text-primary rounded-lg">
                            Assign
                        </button>
                    </div>
                </div>

                <div class="tiffany-card p-4 rounded-lg border">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold">Pro Shop Staff</h4>
                            <p class="text-sm text-gray-500">2 active • Morning shift</p>
                        </div>
                        <button onclick="contactStaff('proshop')" class="px-4 py-2 bg-gray-200 rounded-lg">
                            Contact
                        </button>
                    </div>
                </div>

                <div class="tiffany-card p-4 rounded-lg border">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold">F&B Team</h4>
                            <p class="text-sm text-gray-500">5 active • Lunch service</p>
                        </div>
                        <button onclick="contactStaff('fnb')" class="px-4 py-2 bg-gray-200 rounded-lg">
                            Contact
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Quick Actions</h3>
            <div class="grid grid-cols-2 gap-4">
                <button class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-primary">assessment</span>
                    </div>
                    <h4 class="font-semibold">View Reports</h4>
                    <p class="text-sm text-gray-500">Daily analytics</p>
                </button>

                <button class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-blue-100 bg-blue-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-blue-600">campaign</span>
                    </div>
                    <h4 class="font-semibold">Announcements</h4>
                    <p class="text-sm text-gray-500">Send to staff</p>
                </button>

                <button class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-green-600">apartment</span>
                    </div>
                    <h4 class="font-semibold">Facility Mgmt</h4>
                    <p class="text-sm text-gray-500">Course & clubhouse</p>
                </button>

                <button class="tiffany-card p-4 rounded-lg border hover:bg-red-50">
                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-red-600">emergency</span>
                    </div>
                    <h4 class="font-semibold">Emergency Mgmt</h4>
                    <p class="text-sm text-gray-500">Crisis response</p>
                </button>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">F&B Analytics</h3>
            <div class="tiffany-card p-4 rounded-lg border">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <p class="text-2xl font-bold text-primary">47</p>
                        <p class="text-sm text-gray-500">Orders Today</p>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-green-600">฿12.8k</p>
                        <p class="text-sm text-gray-500">F&B Revenue</p>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <p class="text-lg font-semibold">4.7⭐</p>
                        <p class="text-sm text-gray-500">Avg Rating</p>
                    </div>
                    <div>
                        <p class="text-lg font-semibold">18min</p>
                        <p class="text-sm text-gray-500">Avg Prep Time</p>
                    </div>
                </div>
            </div>
        </section>
        </div>

        <!-- Staff Tab -->
        <div id="manager-staff" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Staff Overview</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="tiffany-gradient p-4 rounded-lg">
                        <div class="text-center">
                            <span class="text-3xl font-bold text-primary">17</span>
                            <p class="text-sm text-gray-500">Total Caddies</p>
                            <p class="text-xs text-green-600">12 active today</p>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-100 to-blue-50 dark:from-blue-900/50 dark:to-blue-900/30 p-4 rounded-lg">
                        <div class="text-center">
                            <span class="text-3xl font-bold text-blue-600">8</span>
                            <p class="text-sm text-gray-500">Support Staff</p>
                            <p class="text-xs text-blue-600">All present</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Caddie Management</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-primary">person</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Ning</h4>
                                    <p class="text-sm text-gray-500">Senior Caddie • Active with John Mitchell</p>
                                    <p class="text-sm text-green-600">Course A, Hole 7</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="contactStaff('mike')" class="p-2 rounded-lg bg-primary/10 text-primary">
                                    <span class="material-symbols-outlined">message</span>
                                </button>
                                <button onclick="viewStaffDetails('mike')" class="p-2 rounded-lg bg-gray-200">
                                    <span class="material-symbols-outlined">more_vert</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-green-600">person</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">David Kim</h4>
                                    <p class="text-sm text-gray-500">Caddie • Available for assignment</p>
                                    <p class="text-sm text-blue-600">Ready for next group</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="assignCaddy('david')" class="px-3 py-1 rounded-lg bg-primary text-white text-sm">
                                    Assign
                                </button>
                                <button onclick="contactStaff('david')" class="p-2 rounded-lg bg-primary/10 text-primary">
                                    <span class="material-symbols-outlined">message</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-orange-600">person</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Lisa Wong</h4>
                                    <p class="text-sm text-gray-500">Caddie • On break</p>
                                    <p class="text-sm text-orange-600">Back in 10 minutes</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="contactStaff('lisa')" class="p-2 rounded-lg bg-primary/10 text-primary">
                                    <span class="material-symbols-outlined">message</span>
                                </button>
                                <button onclick="viewStaffDetails('lisa')" class="p-2 rounded-lg bg-gray-200">
                                    <span class="material-symbols-outlined">more_vert</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Support Staff</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-purple-600">store</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Sarah Chen</h4>
                                    <p class="text-sm text-gray-500">Pro Shop Manager • Morning shift</p>
                                    <p class="text-sm text-green-600">Currently serving customers</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="contactStaff('sarah')" class="p-2 rounded-lg bg-primary/10 text-primary">
                                    <span class="material-symbols-outlined">message</span>
                                </button>
                                <button onclick="viewStaffDetails('sarah')" class="p-2 rounded-lg bg-gray-200">
                                    <span class="material-symbols-outlined">more_vert</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-orange-600">restaurant</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Chef Marco</h4>
                                    <p class="text-sm text-gray-500">Head Chef • Kitchen</p>
                                    <p class="text-sm text-green-600">Preparing lunch orders</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="contactStaff('chef')" class="p-2 rounded-lg bg-primary/10 text-primary">
                                    <span class="material-symbols-outlined">message</span>
                                </button>
                                <button onclick="viewStaffDetails('chef')" class="p-2 rounded-lg bg-gray-200">
                                    <span class="material-symbols-outlined">more_vert</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Reports Tab - Course Conditions -->
        <div id="manager-reports" class="tab-content hidden">
            <!-- Course Conditions Header -->
            <div class="mb-6">
                <div class="flex items-center gap-3 mb-4">
                    <button onclick="goBackFromCourseConditions()" class="w-8 h-8 rounded-lg flex items-center justify-center hover:bg-gray-100">
                        <span class="material-symbols-outlined">arrow_back</span>
                    </button>
                    <h2 class="text-2xl font-bold" data-translate="course_conditions">Course Conditions</h2>
                </div>

                <!-- Course Category Tabs -->
                <div class="flex border-b border-gray-200">
                    <button onclick="showCourseCategory('greens')" class="px-4 py-3 text-sm font-semibold text-primary border-b-2 border-primary course-cat-tab" id="greens-tab" data-translate="greens">Greens</button>
                    <button onclick="showCourseCategory('fairways')" class="px-4 py-3 text-sm font-semibold text-gray-500 hover:text-gray-700 course-cat-tab" id="fairways-tab" data-translate="fairways">Fairways</button>
                    <button onclick="showCourseCategory('bunkers')" class="px-4 py-3 text-sm font-semibold text-gray-500 hover:text-gray-700 course-cat-tab" id="bunkers-tab" data-translate="bunkers">Bunkers</button>
                    <button onclick="showCourseCategory('other')" class="px-4 py-3 text-sm font-semibold text-gray-500 hover:text-gray-700 course-cat-tab" id="other-tab" data-translate="other">Other</button>
                </div>
            </div>

            <!-- Course Element Selection -->
            <div class="mb-6">
                <h3 class="text-3xl font-bold mb-4" id="course-element-title">Green 1</h3>

                <!-- Element Selector Dropdown -->
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2" data-translate="select_element">Select Element:</label>
                    <select id="elementSelector" onchange="selectCourseElement()" class="w-full p-3 border border-gray-300 rounded-lg bg-white">
                        <!-- Options populated by JavaScript based on category -->
                    </select>
                </div>

                <!-- Condition Dropdown -->
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2" data-translate="condition">Condition:</label>
                    <select id="conditionSelector" class="w-full p-3 border border-gray-300 rounded-lg bg-white">
                        <option value="perfect" data-translate="perfect">Perfect</option>
                        <option value="excellent" data-translate="excellent">Excellent</option>
                        <option value="good" data-translate="good">Good</option>
                        <option value="fair" data-translate="fair">Fair</option>
                        <option value="poor" data-translate="poor">Poor</option>
                        <option value="needs_attention" data-translate="needs_attention">Needs Attention</option>
                    </select>
                </div>

                <!-- Speed Input (for Greens only) -->
                <div class="mb-4" id="speed-section" style="display: block;">
                    <label class="block text-sm font-medium mb-2" data-translate="speed_stimp">Speed (Stimp Meter):</label>
                    <input type="text" id="speedInput" placeholder="e.g., 10.5" class="w-full p-3 border border-gray-300 rounded-lg" data-translate-placeholder="speed_placeholder">
                </div>

                <!-- Notes Section -->
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2" data-translate="notes">Notes:</label>
                    <textarea id="notesInput" rows="4" placeholder="Add any relevant notes..." class="w-full p-3 border border-gray-300 rounded-lg resize-none" data-translate-placeholder="notes_placeholder"></textarea>
                </div>

                <!-- Photos Section -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold mb-4" data-translate="photos">Photos</h4>
                    <div class="grid grid-cols-3 gap-3" id="photo-grid">
                        <!-- Sample Course Photos -->
                        <div class="relative rounded-lg overflow-hidden" style="aspect-ratio: 1;">
                            <img src="./green_small.jpg" alt="Green Condition" class="w-full h-full object-cover">
                            <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-2">
                                Green Condition
                            </div>
                        </div>

                        <div class="relative rounded-lg overflow-hidden" style="aspect-ratio: 1;">
                            <img src="./fairway_small.jpg" alt="Fairway Condition" class="w-full h-full object-cover">
                            <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-2">
                                Fairway Condition
                            </div>
                        </div>

                        <div class="relative rounded-lg overflow-hidden" style="aspect-ratio: 1;">
                            <img src="./bunker_small.jpg" alt="Bunker Condition" class="w-full h-full object-cover">
                            <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-2">
                                Bunker Condition
                            </div>
                        </div>

                        <!-- Add Photo Button -->
                        <button onclick="addPhoto()" class="border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center hover:border-primary hover:bg-primary/5 transition-colors" style="aspect-ratio: 1;">
                            <span class="material-symbols-outlined text-gray-400 text-3xl mb-1">add_a_photo</span>
                            <span class="text-sm text-gray-500" data-translate="add_photo">Add Photo</span>
                        </button>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4 mt-8">
                    <button onclick="cancelCourseConditionUpdate()" class="flex-1 py-3 px-6 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 transition-colors" data-translate="cancel">
                        Cancel
                    </button>
                    <button onclick="saveCourseConditionUpdate()" class="flex-1 py-3 px-6 bg-primary text-white rounded-lg font-semibold hover:bg-primary-dark transition-colors" data-translate="save">
                        Save
                    </button>
                </div>
            </div>
        </div>

        <!-- Alerts Tab -->
        <div id="manager-alerts" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Active Alerts</h3>
                <div class="space-y-3">
                    <div onclick="showAlert('emergency')" class="bg-red-50 border border-red-200 p-4 rounded-lg cursor-pointer">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-red-600">emergency</span>
                            <div>
                                <h4 class="font-semibold text-red-700">Medical Emergency</h4>
                                <p class="text-sm text-red-600">Hole 12 - Ambulance dispatched</p>
                                <p class="text-xs text-gray-500">5 minutes ago</p>
                            </div>
                        </div>
                    </div>

                    <div onclick="showAlert('weather')" class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg cursor-pointer">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-yellow-600">thunderstorm</span>
                            <div>
                                <h4 class="font-semibold text-yellow-700">Weather Warning</h4>
                                <p class="text-sm text-yellow-600">Thunderstorm approaching in 30min</p>
                                <p class="text-xs text-gray-500">Weather service alert</p>
                            </div>
                        </div>
                    </div>

                    <div onclick="showAlert('maintenance')" class="bg-orange-50 border border-orange-200 p-4 rounded-lg cursor-pointer">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-orange-600">build</span>
                            <div>
                                <h4 class="font-semibold text-orange-700">Maintenance Required</h4>
                                <p class="text-sm text-orange-600">Golf cart #7 needs repair</p>
                                <p class="text-xs text-gray-500">Reported by caddie Mike</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Recent Notifications</h3>
                <div class="space-y-2">
                    <div class="tiffany-card p-3 rounded-lg border">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="font-medium">New booking confirmed</p>
                                <p class="text-sm text-gray-500">John Smith - Tomorrow 9:00 AM</p>
                            </div>
                            <span class="text-xs text-gray-400">2 min ago</span>
                        </div>
                    </div>

                    <div class="tiffany-card p-3 rounded-lg border">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="font-medium">Staff check-in</p>
                                <p class="text-sm text-gray-500">David Kim started his shift</p>
                            </div>
                            <span class="text-xs text-gray-400">15 min ago</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="sticky bottom-0 bg-white/90 backdrop-blur-sm border-t border-border">
        <nav class="flex justify-around p-2">
            <a class="flex flex-col items-center justify-center gap-1 w-1/4 text-primary">
                <span class="material-symbols-outlined fill">dashboard</span>
                <span class="text-xs font-medium">Overview</span>
            </a>
            <a onclick="showManagerTab('staff', event)" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">groups</span>
                <span class="text-xs font-medium">Staff</span>
            </a>
            <a onclick="showManagerTab('reports', event)" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">assessment</span>
                <span class="text-xs font-medium">Reports</span>
            </a>
            <a onclick="showScreen('managerSettings')" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">settings</span>
                <span class="text-xs font-medium">Settings</span>
            </a>
        </nav>
    </footer>
</div>

<!-- PRO SHOP DASHBOARD -->
<div id="proshopDashboard" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="logout()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">logout</span>
            </button>
            <h1 class="text-xl font-bold" data-translate="pro_shop_dashboard">Pro Shop Dashboard</h1>
            <select id="proshopLanguageSelect" onchange="switchLanguage(this.value)"
                    class="text-xs rounded border px-2 py-1 bg-white">
                <option value="en">EN</option>
                <option value="th">TH</option>
                <option value="ko">KO</option>
                <option value="ja">JA</option>
            </select>
        </div>
        <nav class="border-b border-border">
            <div class="flex items-center justify-around px-2 text-sm font-semibold tab-nav">
                <a onclick="showProShopTab('inventory', event)" class="px-3 py-3 text-primary border-b-2 border-primary cursor-pointer">Inventory</a>
                <a onclick="showProShopTab('sales', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer">Sales</a>
                <a onclick="showProShopTab('bookings', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer">Bookings</a>
                <a onclick="showProShopTab('members', event)" class="px-3 py-3 text-gray-500 hover:text-gray-700 cursor-pointer">Members</a>
            </div>
        </nav>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <!-- Inventory Tab -->
        <div id="proshop-inventory" class="tab-content">
        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Sales Overview</h3>
            <div class="grid grid-cols-2 gap-4">
                <div class="tiffany-gradient p-4 rounded-lg">
                    <div class="flex items-center justify-between mb-2">
                        <span class="material-symbols-outlined text-primary">payments</span>
                        <span class="text-2xl font-bold text-primary">฿24.7k</span>
                    </div>
                    <h4 class="font-semibold">Daily Sales</h4>
                    <p class="text-sm text-gray-500">43 transactions</p>
                </div>

                <div class="bg-gradient-to-br from-green-100 to-green-50 p-4 rounded-lg">
                    <div class="flex items-center justify-between mb-2">
                        <span class="material-symbols-outlined text-green-600">trending_up</span>
                        <span class="text-2xl font-bold text-green-600">฿575</span>
                    </div>
                    <h4 class="font-semibold">Avg Order Value</h4>
                    <p class="text-sm text-gray-500">+12% this week</p>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Inventory Categories</h3>
            <div class="space-y-4">
                <div onclick="showInventoryCategory('equipment')" class="tiffany-card rounded-lg p-4 border cursor-pointer hover:bg-primary/5">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-primary">sports_golf</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Golf Equipment</h4>
                                <p class="text-sm text-gray-500">125 items • ฿180k inventory value</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="px-2 py-1 bg-green-100 text-green-700 text-green-700 rounded-full text-xs">Good Stock</span>
                        </div>
                    </div>
                </div>

                <div onclick="showInventoryCategory('apparel')" class="tiffany-card rounded-lg p-4 border cursor-pointer hover:bg-primary/5">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-blue-100 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-blue-600">checkroom</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Apparel</h4>
                                <p class="text-sm text-gray-500">89 items • ฿95k inventory value</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="px-2 py-1 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 rounded-full text-xs">Low Stock</span>
                        </div>
                    </div>
                </div>

                <div onclick="showInventoryCategory('accessories')" class="tiffany-card rounded-lg p-4 border cursor-pointer hover:bg-primary/5">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-purple-600">shopping_bag</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Accessories</h4>
                                <p class="text-sm text-gray-500">67 items • ฿45k inventory value</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="px-2 py-1 bg-green-100 text-green-700 text-green-700 rounded-full text-xs">Good Stock</span>
                        </div>
                    </div>
                </div>

                <div onclick="showInventoryCategory('fnb')" class="tiffany-card rounded-lg p-4 border cursor-pointer hover:bg-primary/5">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-orange-600">restaurant</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">F&B Items</h4>
                                <p class="text-sm text-gray-500">34 items • ฿28k inventory value</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="px-2 py-1 bg-red-100 text-red-700 dark:text-red-300 rounded-full text-xs">Critical</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Popular Items</h3>
            <div class="space-y-3">
                <div class="tiffany-card p-4 rounded-lg border">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold">TaylorMade Driver</h4>
                            <p class="text-sm text-gray-500">฿15,900 • 3 sold today</p>
                        </div>
                        <span class="text-green-600 font-semibold">Popular</span>
                    </div>
                </div>

                <div class="tiffany-card p-4 rounded-lg border">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold">Golf Polo Shirt</h4>
                            <p class="text-sm text-gray-500">฿1,200 • 8 sold today</p>
                        </div>
                        <span class="text-green-600 font-semibold">Trending</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Recent Activity</h3>
            <div class="space-y-3">
                <div class="tiffany-card p-3 rounded-lg border">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="font-medium">Member purchase</p>
                            <p class="text-sm text-gray-500">John Smith • Golf balls & tees • ฿480</p>
                        </div>
                        <span class="text-xs text-gray-400">2 min ago</span>
                    </div>
                </div>

                <div class="tiffany-card p-3 rounded-lg border">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="font-medium">Membership renewal</p>
                            <p class="text-sm text-gray-500">Sarah Johnson • Premium membership • ฿25,000</p>
                        </div>
                        <span class="text-xs text-gray-400">15 min ago</span>
                    </div>
                </div>
            </div>
        </section>
        </div>

        <!-- Sales Tab -->
        <div id="proshop-sales" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Sales Analytics</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="tiffany-gradient p-4 rounded-lg">
                        <div class="text-center">
                            <span class="text-3xl font-bold text-primary">฿24.7k</span>
                            <p class="text-sm text-gray-500">Today's Sales</p>
                            <p class="text-xs text-green-600">+15% vs yesterday</p>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-green-100 to-green-50 p-4 rounded-lg">
                        <div class="text-center">
                            <span class="text-3xl font-bold text-green-600">43</span>
                            <p class="text-sm text-gray-500">Transactions</p>
                            <p class="text-xs text-green-600">Avg ฿575 each</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Top Selling Items</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-primary">sports_golf</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">TaylorMade Driver</h4>
                                    <p class="text-sm text-gray-500">3 sold today</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="text-lg font-bold text-primary">฿15,900</span>
                                <p class="text-sm text-green-600">+฿47,700</p>
                            </div>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-blue-100 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-blue-600">checkroom</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Golf Polo Shirts</h4>
                                    <p class="text-sm text-gray-500">8 sold today</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="text-lg font-bold text-blue-600">฿1,200</span>
                                <p class="text-sm text-green-600">+฿9,600</p>
                            </div>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-green-600">sports</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Golf Balls (Dozen)</h4>
                                    <p class="text-sm text-gray-500">15 sold today</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="text-lg font-bold text-green-600">฿480</span>
                                <p class="text-sm text-green-600">+฿7,200</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Bookings Tab -->
        <div id="proshop-bookings" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Equipment Rentals</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-primary">sports_golf</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Golf Club Set - Premium</h4>
                                    <p class="text-sm text-gray-500">Rented by: John Smith</p>
                                    <p class="text-sm text-primary">Return: 6:00 PM today</p>
                                </div>
                            </div>
                            <span class="px-3 py-1 bg-green-100 text-green-700 text-green-700 rounded-full text-sm font-medium">Active</span>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-blue-100 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <span class="material-symbols-outlined text-blue-600">electric_car</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Golf Cart - Standard</h4>
                                    <p class="text-sm text-gray-500">Reserved by: Mike & Tom</p>
                                    <p class="text-sm text-blue-600">Pickup: 2:00 PM today</p>
                                </div>
                            </div>
                            <span class="px-3 py-1 bg-blue-100 bg-blue-100 text-blue-700 text-blue-700 rounded-full text-sm font-medium">Reserved</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Members Tab -->
        <div id="proshop-members" class="tab-content hidden">
            <section class="mb-8">
                <h3 class="text-lg font-bold mb-4">Member Activity</h3>
                <div class="space-y-3">
                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-primary">person</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">John Mitchell</h4>
                                    <p class="text-sm text-gray-500">Premium Member #12345</p>
                                    <p class="text-sm text-green-600">Last purchase: Golf balls - ฿480</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-sm text-gray-500">2 min ago</p>
                                <button onclick="viewMemberProfile('john')" class="text-primary text-sm hover:underline">View Profile</button>
                            </div>
                        </div>
                    </div>

                    <div class="tiffany-card p-4 rounded-lg border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-green-600">person</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold">Sarah Johnson</h4>
                                    <p class="text-sm text-gray-500">Premium Member #67890</p>
                                    <p class="text-sm text-primary">Membership renewed: ฿25,000</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-sm text-gray-500">15 min ago</p>
                                <button onclick="viewMemberProfile('sarah')" class="text-primary text-sm hover:underline">View Profile</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="sticky bottom-0 bg-white/90 backdrop-blur-sm border-t border-border">
        <nav class="flex justify-around p-2">
            <a class="flex flex-col items-center justify-center gap-1 w-1/4 text-primary">
                <span class="material-symbols-outlined fill">inventory</span>
                <span class="text-xs font-medium">Inventory</span>
            </a>
            <a onclick="showProShopTab('sales', event)" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">point_of_sale</span>
                <span class="text-xs font-medium">Sales</span>
            </a>
            <a onclick="showProShopTab('bookings', event)" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">calendar_today</span>
                <span class="text-xs font-medium">Bookings</span>
            </a>
            <a onclick="showProShopTab('members', event)" class="flex flex-col items-center justify-center gap-1 w-1/4 text-gray-400 hover:text-primary cursor-pointer">
                <span class="material-symbols-outlined">people</span>
                <span class="text-xs font-medium">Members</span>
            </a>
        </nav>
    </footer>
</div>

<!-- MANAGER SETTINGS SCREEN -->
<div id="managerSettings" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="goBack()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1 class="text-xl font-bold">Manager Settings</h1>
            <div class="w-10 h-10"></div>
        </div>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">System Configuration</h3>
            <div class="space-y-4">
                <div class="tiffany-card p-4 rounded-lg">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-primary">notifications</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Alert Settings</h4>
                                <p class="text-sm text-gray-500">Configure system alerts</p>
                            </div>
                        </div>
                        <button onclick="configureAlerts()" class="px-4 py-2 bg-primary/20 text-primary rounded-lg">
                            Configure
                        </button>
                    </div>
                </div>

                <div class="tiffany-card p-4 rounded-lg">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-blue-600">groups</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Staff Management</h4>
                                <p class="text-sm text-gray-500">Add/remove staff access</p>
                            </div>
                        </div>
                        <button onclick="manageStaffAccess()" class="px-4 py-2 bg-blue-100 text-blue-600 rounded-lg">
                            Manage
                        </button>
                    </div>
                </div>

                <div class="tiffany-card p-4 rounded-lg">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-green-600">schedule</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Operating Hours</h4>
                                <p class="text-sm text-gray-500">Set course schedules</p>
                            </div>
                        </div>
                        <button onclick="setOperatingHours()" class="px-4 py-2 bg-green-100 text-green-600 rounded-lg">
                            Edit
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Reporting</h3>
            <div class="space-y-4">
                <div class="tiffany-card p-4 rounded-lg">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-purple-600">analytics</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Report Automation</h4>
                                <p class="text-sm text-gray-500">Schedule automatic reports</p>
                            </div>
                        </div>
                        <button onclick="configureReports()" class="px-4 py-2 bg-purple-100 text-purple-600 rounded-lg">
                            Setup
                        </button>
                    </div>
                </div>

                <div class="tiffany-card p-4 rounded-lg">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-orange-600">backup</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">Data Backup</h4>
                                <p class="text-sm text-gray-500">Configure data backup</p>
                            </div>
                        </div>
                        <button onclick="configureBackup()" class="px-4 py-2 bg-orange-100 text-orange-600 rounded-lg">
                            Configure
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Account & Security</h3>
            <div class="space-y-4">
                <div class="tiffany-card p-4 rounded-lg">
                    <h4 class="font-semibold mb-2">Manager Profile</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Name:</span>
                            <span class="font-semibold">Sarah Wilson</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Role:</span>
                            <span class="font-semibold text-primary">General Manager</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Access Level:</span>
                            <span class="font-semibold text-green-600">Administrator</span>
                        </div>
                    </div>
                    <button onclick="editProfile()" class="w-full mt-4 bg-primary text-white py-2 rounded-lg font-semibold">
                        Edit Profile
                    </button>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- GOLFER PROFILE SCREEN -->
<div id="golferProfile" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="goBack()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1 class="text-xl font-bold">My Profile</h1>
            <button class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">edit</span>
            </button>
        </div>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <section class="mb-8">
            <div class="flex items-center gap-4 p-6 tiffany-gradient rounded-lg">
                <div class="w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center">
                    <span class="material-symbols-outlined text-3xl text-primary">person</span>
                </div>
                <div>
                    <h2 class="text-2xl font-bold">John Mitchell</h2>
                    <p class="text-gray-500">Premium Member since 2019</p>
                    <p class="text-primary font-semibold">Member ID: #12345</p>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Account Information</h3>
            <div class="tiffany-card rounded-lg p-4 border space-y-4">
                <div class="flex justify-between">
                    <span class="text-gray-600">Email:</span>
                    <span class="font-semibold">john.mitchell@email.com</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Phone:</span>
                    <span class="font-semibold">+66 89 123 4567</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Membership Type:</span>
                    <span class="font-semibold text-primary">Premium</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Current Handicap:</span>
                    <span class="font-semibold">18.2</span>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Quick Actions</h3>
            <div class="grid grid-cols-2 gap-4">
                <button class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-primary">settings</span>
                    </div>
                    <h4 class="font-semibold">Settings</h4>
                </button>
                <button class="tiffany-card p-4 rounded-lg border hover:bg-primary/5">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-green-600">help</span>
                    </div>
                    <h4 class="font-semibold">Support</h4>
                </button>
            </div>
        </section>
    </main>
</div>

<!-- CADDIE LOCATION SCREEN -->
<div id="caddieLocation" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="goBack()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1 class="text-xl font-bold">Current Location</h1>
            <button class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">my_location</span>
            </button>
        </div>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <section class="mb-8">
            <div class="tiffany-gradient rounded-lg p-4">
                <div class="flex items-center gap-4">
                    <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
                        <span class="material-symbols-outlined text-2xl text-primary">location_on</span>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold">Course A, Hole 7</h3>
                        <p class="text-gray-600">With John Mitchell's group</p>
                        <p class="text-primary font-semibold">Started at 1:45 PM</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">GPS Tracking</h3>
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="text-center mb-4">
                    <div class="w-32 h-32 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="material-symbols-outlined text-6xl text-green-600">gps_fixed</span>
                    </div>
                    <p class="text-lg font-semibold">Location Active</p>
                    <p class="text-sm text-gray-500">Last updated: Just now</p>
                </div>
                <button class="w-full bg-primary text-white py-3 rounded-lg font-semibold">
                    Share Location with Manager
                </button>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Quick Updates</h3>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="updateLocation('break')" class="tiffany-card p-4 rounded-lg border hover:bg-orange/5">
                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-orange-600">coffee</span>
                    </div>
                    <h4 class="font-semibold">On Break</h4>
                </button>
                <button onclick="updateLocation('issue')" class="tiffany-card p-4 rounded-lg border hover:bg-red-50">
                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-3 mx-auto">
                        <span class="material-symbols-outlined text-red-600">warning</span>
                    </div>
                    <h4 class="font-semibold" data-translate="report_issue">Report Issue</h4>
                </button>
            </div>
        </section>
    </main>
</div>

<!-- CADDIE PROFILE SCREEN -->
<div id="caddieProfile" class="screen">
    <header class="sticky top-0 bg-white/95 backdrop-blur-sm z-10 safe-top">
        <div class="flex items-center justify-between p-4">
            <button onclick="goBack()" class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1 class="text-xl font-bold">My Profile</h1>
            <button class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-gray-100">
                <span class="material-symbols-outlined">edit</span>
            </button>
        </div>
    </header>

    <main class="flex-1 px-4 py-6 pb-20">
        <section class="mb-8">
            <div class="flex items-center gap-4 p-6 tiffany-gradient rounded-lg">
                <div class="w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center">
                    <span class="material-symbols-outlined text-3xl text-primary">person</span>
                </div>
                <div>
                    <h2 class="text-2xl font-bold">Ning</h2>
                    <p class="text-gray-500">Senior Caddie since 2020</p>
                    <p class="text-primary font-semibold">Employee ID: #C789</p>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4">Performance Stats</h3>
            <div class="grid grid-cols-2 gap-4">
                <div class="tiffany-card p-4 rounded-lg border text-center">
                    <span class="text-2xl font-bold text-primary">4.9</span>
                    <p class="text-sm text-gray-500">Average Rating</p>
                </div>
                <div class="tiffany-card p-4 rounded-lg border text-center">
                    <span class="text-2xl font-bold text-green-600">฿8,420</span>
                    <p class="text-sm text-gray-500">Tips This Month</p>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h3 class="text-lg font-bold mb-4" data-translate="todays_summary">Today's Summary</h3>
            <div class="tiffany-card rounded-lg p-4 border space-y-3">
                <div class="flex justify-between">
                    <span class="text-gray-600">Rounds Completed:</span>
                    <span class="font-semibold">2</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Tips Earned:</span>
                    <span class="font-semibold text-green-600">฿650</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Hours Worked:</span>
                    <span class="font-semibold">6.5</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Customer Rating:</span>
                    <span class="font-semibold">5.0 ⭐</span>
                </div>
            </div>
        </section>
    </main>
</div>

<script>
// Global variables
let currentUser = { role: 'guest', name: 'Guest User' };
let cart = [];
let currentScreen = 'login';
let lastScreen = 'login';
let currentLanguage = 'en';

// Language translations
const translations = {
    en: {
        // Navigation and general
        'login': 'Login',
        'golfcourse': 'Golf Course Management',
        'select_role': 'Please select your role:',
        'continue': 'Continue',
        'back': 'Back',
        'logout': 'Logout',
        'language': 'Language',

        // Roles
        'golfer': 'Golfer',
        'caddie': 'Caddie',
        'manager': 'Manager',
        'pro_shop': 'Pro Shop',

        // Dashboard titles
        'golfer_dashboard': 'Golfer Dashboard',
        'caddie_dashboard': 'Caddie Dashboard',
        'manager_dashboard': 'Manager Dashboard',
        'pro_shop_dashboard': 'Pro Shop Dashboard',

        // Common actions
        'book_now': 'Book Now',
        'order_food': 'Order Food',
        'view_stats': 'View Stats',
        'my_profile': 'My Profile',
        'communication': 'Communication',
        'reports': 'Reports',
        'settings': 'Settings',

        // Food ordering
        'food_menu': 'Food Menu',
        'appetizers': 'Appetizers',
        'main_courses': 'Main Courses',
        'beverages': 'Beverages',
        'beer_selection': 'Beer Selection',
        'add_to_cart': 'Add to Cart',
        'view_cart': 'View Cart',
        'checkout': 'Checkout',
        'order_total': 'Order Total',
        'place_order': 'Place Order',

        // Report issues
        'report_issue': 'Report Issue',
        'issue_type': 'Select Issue Type:',
        'hole_number': 'Select Hole Number:',
        'cart_battery': 'Cart Battery Issue',
        'medical_emergency': 'Medical Emergency',
        'course_damage': 'Course Damage',
        'request_marshall': 'Request Marshall',
        'submit_report': 'Submit Report',
        'active_reports': 'My Reports Status',
        'no_active_reports': 'No active reports',

        // Login form
        'username': 'Username',
        'password': 'Password',
        'enter_username': 'Enter username',
        'enter_password': 'Enter password',
        'login_as_golfer': 'Login as Golfer',
        'login_as_caddie': 'Login as Caddie',
        'login_as_manager': 'Login as Manager',
        'login_as_proshop': 'Login as Pro Shop',
        'remember_me': 'Remember me',
        'forgot_password': 'Forgot password?',
        'continue_as_guest': 'Continue as Guest',

        // Dashboard sections
        'quick_actions': 'Quick Actions',
        'todays_summary': 'Today\'s Summary',
        'communication_hub': 'Communication Hub',
        'recent_activity': 'Recent Activity',
        'staff_overview': 'Staff Overview',
        'operational_alerts': 'Operational Alerts',
        'sales_summary': 'Sales Summary',
        'inventory_overview': 'Inventory Overview',

        // Actions and buttons
        'start_round': 'Start Round',
        'end_round': 'End Round',
        'request_break': 'Request Break',
        'view_schedule': 'View Schedule',
        'contact_manager': 'Contact Manager',
        'view_earnings': 'View Earnings',
        'emergency_call': 'Emergency Call',
        'view_all': 'View All',
        'manage_bookings': 'Manage Bookings',
        'staff_assignments': 'Staff Assignments',
        'course_conditions': 'Course Conditions',
        'member_services': 'Member Services',
        'process_sale': 'Process Sale',
        'check_inventory': 'Check Inventory',

        // Status and labels
        'rounds_completed': 'Rounds Completed',
        'tips_earned': 'Tips Earned',
        'hours_worked': 'Hours Worked',
        'customer_rating': 'Customer Rating',
        'active_golfers': 'Active Golfers',
        'available_caddies': 'Available Caddies',
        'maintenance_alerts': 'Maintenance Alerts',
        'weather_conditions': 'Weather Conditions',
        'daily_revenue': 'Daily Revenue',
        'transactions': 'Transactions',
        'low_stock_items': 'Low Stock Items',
        'member_visits': 'Member Visits',

        // Course conditions
        'course_conditions': 'Course Conditions',
        'greens': 'Greens',
        'fairways': 'Fairways',
        'bunkers': 'Bunkers',
        'other': 'Other',
        'select_element': 'Select Element:',
        'condition': 'Condition',
        'speed_stimp': 'Speed (Stimp Meter)',
        'speed_placeholder': 'e.g., 10.5',
        'notes': 'Notes',
        'notes_placeholder': 'Add any relevant notes...',
        'photos': 'Photos',
        'add_photo': 'Add Photo',
        'cancel': 'Cancel',
        'save': 'Save',
        'perfect': 'Perfect',
        'excellent': 'Excellent',
        'good': 'Good',
        'fair': 'Fair',
        'poor': 'Poor',
        'needs_attention': 'Needs Attention'
    },
    th: {
        // Navigation and general
        'login': 'เข้าสู่ระบบ',
        'golfcourse': 'ระบบจัดการสนามกอล์ฟ',
        'select_role': 'โปรดเลือกบทบาทของคุณ:',
        'continue': 'ดำเนินการต่อ',
        'back': 'กลับ',
        'logout': 'ออกจากระบบ',
        'language': 'ภาษา',

        // Roles
        'golfer': 'นักกอล์ฟ',
        'caddie': 'แคดดี้',
        'manager': 'ผู้จัดการ',
        'pro_shop': 'ร้านโปรช้อป',

        // Dashboard titles
        'golfer_dashboard': 'แดชบอร์ดนักกอล์ฟ',
        'caddie_dashboard': 'แดชบอร์ดแคดดี้',
        'manager_dashboard': 'แดชบอร์ดผู้จัดการ',
        'pro_shop_dashboard': 'แดชบอร์ดร้านโปรช้อป',

        // Common actions
        'book_now': 'จองตอนนี้',
        'order_food': 'สั่งอาหาร',
        'view_stats': 'ดูสถิติ',
        'my_profile': 'โปรไฟล์ของฉัน',
        'communication': 'การสื่อสาร',
        'reports': 'รายงาน',
        'settings': 'การตั้งค่า',

        // Food ordering
        'food_menu': 'เมนูอาหาร',
        'appetizers': 'อาหารเรียกน้ำย่อย',
        'main_courses': 'อาหารจานหลัก',
        'beverages': 'เครื่องดื่ม',
        'beer_selection': 'เบียร์',
        'add_to_cart': 'ใส่ตะกร้า',
        'view_cart': 'ดูตะกร้า',
        'checkout': 'ชำระเงิน',
        'order_total': 'ยอดรวม',
        'place_order': 'สั่งอาหาร',

        // Report issues
        'report_issue': 'รายงานปัญหา',
        'issue_type': 'เลือกประเภทปัญหา:',
        'hole_number': 'เลือกหมายเลขหลุม:',
        'cart_battery': 'ปัญหาแบตเตอรี่รถกอล์ฟ',
        'medical_emergency': 'เหตุฉุกเฉินทางการแพทย์',
        'course_damage': 'ความเสียหายของสนาม',
        'request_marshall': 'ขอเจ้าหน้าที่สนาม',
        'submit_report': 'ส่งรายงาน',
        'active_reports': 'สถานะรายงานของฉัน',
        'no_active_reports': 'ไม่มีรายงานที่ดำเนินการอยู่',

        // Login form
        'username': 'ชื่อผู้ใช้',
        'password': 'รหัสผ่าน',
        'enter_username': 'กรอกชื่อผู้ใช้',
        'enter_password': 'กรอกรหัสผ่าน',
        'login_as_golfer': 'เข้าสู่ระบบในฐานะนักกอล์ฟ',
        'login_as_caddie': 'เข้าสู่ระบบในฐานะแคดดี้',
        'login_as_manager': 'เข้าสู่ระบบในฐานะผู้จัดการ',
        'login_as_proshop': 'เข้าสู่ระบบในฐานะร้านโปรช้อป',
        'remember_me': 'จดจำฉัน',
        'forgot_password': 'ลืมรหัสผ่าน?',
        'continue_as_guest': 'ดำเนินการต่อในฐานะแขก',

        // Dashboard sections
        'quick_actions': 'การดำเนินการด่วน',
        'todays_summary': 'สรุปประจำวัน',
        'communication_hub': 'ศูนย์การสื่อสาร',
        'recent_activity': 'กิจกรรมล่าสุด',
        'staff_overview': 'ภาพรวมพนักงาน',
        'operational_alerts': 'แจ้งเตือนการดำเนินงาน',
        'sales_summary': 'สรุปยอดขาย',
        'inventory_overview': 'ภาพรวมสินค้าคงคลัง',

        // Actions and buttons
        'start_round': 'เริ่มรอบ',
        'end_round': 'จบรอบ',
        'request_break': 'ขอหยุดพัก',
        'view_schedule': 'ดูตารางงาน',
        'contact_manager': 'ติดต่อผู้จัดการ',
        'view_earnings': 'ดูรายได้',
        'emergency_call': 'โทรฉุกเฉิน',
        'view_all': 'ดูทั้งหมด',
        'manage_bookings': 'จัดการการจอง',
        'staff_assignments': 'มอบหมายงานพนักงาน',
        'course_conditions': 'สภาพสนาม',
        'member_services': 'บริการสมาชิก',
        'process_sale': 'ดำเนินการขาย',
        'check_inventory': 'ตรวจสอบสินค้าคงคลัง',

        // Status and labels
        'rounds_completed': 'รอบที่เสร็จสิ้น',
        'tips_earned': 'ทิปที่ได้รับ',
        'hours_worked': 'ชั่วโมงทำงาน',
        'customer_rating': 'คะแนนลูกค้า',
        'active_golfers': 'นักกอล์ฟที่กำลังเล่น',
        'available_caddies': 'แคดดี้ที่พร้อมใช้งาน',
        'maintenance_alerts': 'แจ้งเตือนการบำรุงรักษา',
        'weather_conditions': 'สภาพอากาศ',
        'daily_revenue': 'รายได้ประจำวัน',
        'transactions': 'ธุรกรรม',
        'low_stock_items': 'สินค้าที่เหลือน้อย',
        'member_visits': 'การเยี่ยมชมของสมาชิก',

        // Course conditions
        'course_conditions': 'สภาพสนาม',
        'greens': 'กรีน',
        'fairways': 'แฟร์เวย์',
        'bunkers': 'บังเกอร์',
        'other': 'อื่นๆ',
        'select_element': 'เลือกองค์ประกอบ:',
        'condition': 'สภาพ',
        'speed_stimp': 'ความเร็ว (Stimp Meter)',
        'speed_placeholder': 'เช่น 10.5',
        'notes': 'หมายเหตุ',
        'notes_placeholder': 'เพิ่มหมายเหตุที่เกี่ยวข้อง...',
        'photos': 'รูปภาพ',
        'add_photo': 'เพิ่มรูปภาพ',
        'cancel': 'ยกเลิก',
        'save': 'บันทึก',
        'perfect': 'สมบูรณ์แบบ',
        'excellent': 'ยอดเยี่ยม',
        'good': 'ดี',
        'fair': 'พอใช้',
        'poor': 'แย่',
        'needs_attention': 'ต้องการความสนใจ'
    },
    ko: {
        // Navigation and general
        'login': '로그인',
        'golfcourse': '골프장 관리 시스템',
        'select_role': '역할을 선택하세요:',
        'continue': '계속',
        'back': '뒤로',
        'logout': '로그아웃',
        'language': '언어',

        // Roles
        'golfer': '골퍼',
        'caddie': '캐디',
        'manager': '매니저',
        'pro_shop': '프로샵',

        // Dashboard titles
        'golfer_dashboard': '골퍼 대시보드',
        'caddie_dashboard': '캐디 대시보드',
        'manager_dashboard': '매니저 대시보드',
        'pro_shop_dashboard': '프로샵 대시보드',

        // Common actions
        'book_now': '지금 예약',
        'order_food': '음식 주문',
        'view_stats': '통계 보기',
        'my_profile': '내 프로필',
        'communication': '커뮤니케이션',
        'reports': '보고서',
        'settings': '설정',

        // Food ordering
        'food_menu': '음식 메뉴',
        'appetizers': '애피타이저',
        'main_courses': '메인 코스',
        'beverages': '음료',
        'beer_selection': '맥주',
        'add_to_cart': '장바구니에 추가',
        'view_cart': '장바구니 보기',
        'checkout': '결제',
        'order_total': '주문 총액',
        'place_order': '주문하기',

        // Report issues
        'report_issue': '문제 신고',
        'issue_type': '문제 유형 선택:',
        'hole_number': '홀 번호 선택:',
        'cart_battery': '카트 배터리 문제',
        'medical_emergency': '의료 응급상황',
        'course_damage': '코스 손상',
        'request_marshall': '마샬 요청',
        'submit_report': '신고 제출',
        'active_reports': '내 신고 상태',
        'no_active_reports': '진행 중인 신고가 없습니다',

        // Login form
        'username': '사용자명',
        'password': '비밀번호',
        'enter_username': '사용자명 입력',
        'enter_password': '비밀번호 입력',
        'login_as_golfer': '골퍼로 로그인',
        'login_as_caddie': '캐디로 로그인',
        'login_as_manager': '매니저로 로그인',
        'login_as_proshop': '프로샵으로 로그인',
        'remember_me': '로그인 상태 유지',
        'forgot_password': '비밀번호를 잊으셨나요?',
        'continue_as_guest': '게스트로 계속하기',

        // Dashboard sections
        'quick_actions': '빠른 작업',
        'todays_summary': '오늘의 요약',
        'communication_hub': '커뮤니케이션 허브',
        'recent_activity': '최근 활동',
        'staff_overview': '직원 개요',
        'operational_alerts': '운영 알림',
        'sales_summary': '매출 요약',
        'inventory_overview': '재고 개요',

        // Actions and buttons
        'start_round': '라운드 시작',
        'end_round': '라운드 종료',
        'request_break': '휴식 요청',
        'view_schedule': '일정 보기',
        'contact_manager': '매니저 연락',
        'view_earnings': '수익 보기',
        'emergency_call': '긴급 통화',
        'view_all': '모두 보기',
        'manage_bookings': '예약 관리',
        'staff_assignments': '직원 배정',
        'course_conditions': '코스 상태',
        'member_services': '회원 서비스',
        'process_sale': '판매 처리',
        'check_inventory': '재고 확인',

        // Status and labels
        'rounds_completed': '완료된 라운드',
        'tips_earned': '획득한 팁',
        'hours_worked': '근무 시간',
        'customer_rating': '고객 평점',
        'active_golfers': '활성 골퍼',
        'available_caddies': '이용 가능한 캐디',
        'maintenance_alerts': '유지보수 알림',
        'weather_conditions': '날씨 상태',
        'daily_revenue': '일일 수익',
        'transactions': '거래',
        'low_stock_items': '재고 부족 품목',
        'member_visits': '회원 방문',

        // Course conditions
        'course_conditions': '코스 상태',
        'greens': '그린',
        'fairways': '페어웨이',
        'bunkers': '벙커',
        'other': '기타',
        'select_element': '요소 선택:',
        'condition': '상태',
        'speed_stimp': '속도 (스팀프 미터)',
        'speed_placeholder': '예: 10.5',
        'notes': '메모',
        'notes_placeholder': '관련 메모를 추가하세요...',
        'photos': '사진',
        'add_photo': '사진 추가',
        'cancel': '취소',
        'save': '저장',
        'perfect': '완벽함',
        'excellent': '우수함',
        'good': '좋음',
        'fair': '보통',
        'poor': '나쁨',
        'needs_attention': '주의 필요'
    },
    ja: {
        // Navigation and general
        'login': 'ログイン',
        'golfcourse': 'ゴルフコース管理システム',
        'select_role': '役割を選択してください：',
        'continue': '続行',
        'back': '戻る',
        'logout': 'ログアウト',
        'language': '言語',

        // Roles
        'golfer': 'ゴルファー',
        'caddie': 'キャディー',
        'manager': 'マネージャー',
        'pro_shop': 'プロショップ',

        // Dashboard titles
        'golfer_dashboard': 'ゴルファーダッシュボード',
        'caddie_dashboard': 'キャディーダッシュボード',
        'manager_dashboard': 'マネージャーダッシュボード',
        'pro_shop_dashboard': 'プロショップダッシュボード',

        // Common actions
        'book_now': '今すぐ予約',
        'order_food': '食事注文',
        'view_stats': '統計を見る',
        'my_profile': 'マイプロフィール',
        'communication': 'コミュニケーション',
        'reports': 'レポート',
        'settings': '設定',

        // Food ordering
        'food_menu': 'フードメニュー',
        'appetizers': '前菜',
        'main_courses': 'メインコース',
        'beverages': '飲み物',
        'beer_selection': 'ビール',
        'add_to_cart': 'カートに追加',
        'view_cart': 'カートを見る',
        'checkout': 'チェックアウト',
        'order_total': '注文合計',
        'place_order': '注文する',

        // Report issues
        'report_issue': '問題報告',
        'issue_type': '問題の種類を選択:',
        'hole_number': 'ホール番号を選択:',
        'cart_battery': 'カートバッテリーの問題',
        'medical_emergency': '医療緊急事態',
        'course_damage': 'コースの損傷',
        'request_marshall': 'マーシャル要請',
        'submit_report': 'レポート提出',
        'active_reports': '私のレポート状況',
        'no_active_reports': 'アクティブなレポートはありません',

        // Login form
        'username': 'ユーザー名',
        'password': 'パスワード',
        'enter_username': 'ユーザー名を入力',
        'enter_password': 'パスワードを入力',
        'login_as_golfer': 'ゴルファーとしてログイン',
        'login_as_caddie': 'キャディーとしてログイン',
        'login_as_manager': 'マネージャーとしてログイン',
        'login_as_proshop': 'プロショップとしてログイン',
        'remember_me': 'ログイン状態を保持',
        'forgot_password': 'パスワードをお忘れですか？',
        'continue_as_guest': 'ゲストとして続行',

        // Dashboard sections
        'quick_actions': 'クイックアクション',
        'todays_summary': '今日のまとめ',
        'communication_hub': 'コミュニケーションハブ',
        'recent_activity': '最近のアクティビティ',
        'staff_overview': 'スタッフ概要',
        'operational_alerts': '運営アラート',
        'sales_summary': '売上サマリー',
        'inventory_overview': '在庫概要',

        // Actions and buttons
        'start_round': 'ラウンド開始',
        'end_round': 'ラウンド終了',
        'request_break': '休憩要請',
        'view_schedule': 'スケジュール表示',
        'contact_manager': 'マネージャー連絡',
        'view_earnings': '収益表示',
        'emergency_call': '緊急電話',
        'view_all': 'すべて表示',
        'manage_bookings': '予約管理',
        'staff_assignments': 'スタッフ割り当て',
        'course_conditions': 'コース状況',
        'member_services': 'メンバーサービス',
        'process_sale': '売上処理',
        'check_inventory': '在庫確認',

        // Status and labels
        'rounds_completed': '完了ラウンド数',
        'tips_earned': '獲得チップ',
        'hours_worked': '勤務時間',
        'customer_rating': '顧客評価',
        'active_golfers': 'アクティブゴルファー',
        'available_caddies': '利用可能キャディー',
        'maintenance_alerts': 'メンテナンスアラート',
        'weather_conditions': '天候状況',
        'daily_revenue': '日次収益',
        'transactions': '取引',
        'low_stock_items': '在庫不足アイテム',
        'member_visits': 'メンバー来場',

        // Course conditions
        'course_conditions': 'コース状況',
        'greens': 'グリーン',
        'fairways': 'フェアウェイ',
        'bunkers': 'バンカー',
        'other': 'その他',
        'select_element': '要素を選択:',
        'condition': 'コンディション',
        'speed_stimp': 'スピード (スティンプメーター)',
        'speed_placeholder': '例: 10.5',
        'notes': 'メモ',
        'notes_placeholder': '関連するメモを追加してください...',
        'photos': '写真',
        'add_photo': '写真を追加',
        'cancel': 'キャンセル',
        'save': '保存',
        'perfect': 'パーフェクト',
        'excellent': '優秀',
        'good': '良好',
        'fair': '普通',
        'poor': '悪い',
        'needs_attention': '注意が必要'
    }
};

// Translation functions
function t(key) {
    return translations[currentLanguage][key] || key;
}

function switchLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('preferredLanguage', lang);

    // Update all language selectors to show the selected language
    const selectors = ['languageSelect', 'golferLanguageSelect', 'caddieLanguageSelect', 'managerLanguageSelect', 'proshopLanguageSelect'];
    selectors.forEach(id => {
        const selector = document.getElementById(id);
        if (selector) {
            selector.value = lang;
        }
    });

    updatePageLanguage();

    const messages = {
        'en': 'Language changed successfully',
        'th': 'เปลี่ยนภาษาสำเร็จแล้ว',
        'ko': '언어가 성공적으로 변경되었습니다',
        'ja': '言語が正常に変更されました'
    };

    showNotification(messages[lang] || messages['en']);
}

function updatePageLanguage() {
    // Update all elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        element.textContent = t(key);
    });

    // Update all elements with data-translate-placeholder attribute
    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        element.placeholder = t(key);
    });

    // Update specific elements manually for complex cases
    updateSpecificElements();
}

function updateSpecificElements() {
    // Update dashboard titles
    const dashboardTitles = document.querySelectorAll('h1');
    dashboardTitles.forEach(title => {
        if (title.textContent.includes('Dashboard') || title.textContent.includes('แดชบอร์ด') ||
            title.textContent.includes('대시보드') || title.textContent.includes('ダッシュボード')) {

            const roleMapping = {
                'golfer': t('golfer_dashboard'),
                'caddie': t('caddie_dashboard'),
                'manager': t('manager_dashboard'),
                'proshop': t('pro_shop_dashboard')
            };

            Object.keys(roleMapping).forEach(role => {
                if (title.textContent.toLowerCase().includes(role) || currentUser.role === role) {
                    title.textContent = roleMapping[role];
                }
            });
        }
    });
}

// Initialize language from localStorage on page load
function initializeLanguage() {
    const savedLanguage = localStorage.getItem('preferredLanguage');
    if (savedLanguage && translations[savedLanguage]) {
        currentLanguage = savedLanguage;

        // Update all language selectors to show the selected language
        const selectors = ['languageSelect', 'golferLanguageSelect', 'caddieLanguageSelect', 'managerLanguageSelect', 'proshopLanguageSelect'];
        selectors.forEach(id => {
            const selector = document.getElementById(id);
            if (selector) {
                selector.value = savedLanguage;
            }
        });

        updatePageLanguage();
    }
}

// Utility functions
function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'notification-toast';
    notification.textContent = message;
    document.body.appendChild(notification);

    setTimeout(() => {
        notification.remove();
    }, 3000);
}

function showScreen(screenId) {
    // Hide all screens
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
    });

    // Remember last screen for back navigation
    if (currentScreen !== screenId) {
        lastScreen = currentScreen;
    }

    // Show target screen
    const targetScreen = document.getElementById(screenId);
    if (targetScreen) {
        targetScreen.classList.add('active');
        targetScreen.classList.add('fade-in');
        currentScreen = screenId;

        // Update cart display if showing cart
        if (screenId === 'foodCart') {
            updateCartDisplay();
        }

        // Update checkout if showing checkout
        if (screenId === 'checkout') {
            updateCheckoutDisplay();
        }

        // Update order tracking if showing order tracking
        if (screenId === 'orderTracking') {
            updateOrderTracking();
        }

        // Update golfer dashboard if showing golfer dashboard
        if (screenId === 'golferDashboard') {
            updateGolferDashboard();
        }

        // Update caddie reports if showing caddie dashboard
        if (screenId === 'caddieDashboard') {
            updateReportsDisplay();
        }
    }
}

function goBack() {
    if (lastScreen && lastScreen !== currentScreen) {
        showScreen(lastScreen);
    } else {
        // Default back behavior based on current screen
        switch(currentScreen) {
            case 'foodOrdering':
            case 'foodCart':
            case 'checkout':
                showScreen(currentUser.role + 'Dashboard');
                break;
            default:
                showScreen(currentUser.role + 'Dashboard');
        }
    }
}

// Authentication functions
function login(role) {
    currentUser.role = role;

    switch(role) {
        case 'golfer':
            currentUser.name = 'John Mitchell';
            showScreen('golferDashboard');
            break;
        case 'caddie':
            currentUser.name = 'Ning';
            showScreen('caddieDashboard');
            break;
        case 'manager':
            currentUser.name = 'Sarah Wilson';
            showScreen('managerDashboard');
            break;
        case 'proshop':
            currentUser.name = 'Robert Chen';
            showScreen('proshopDashboard');
            break;
        default:
            currentUser.name = 'Guest User';
            showScreen('golferDashboard');
    }

    showNotification(`Welcome ${currentUser.name}!`);
}

function logout() {
    currentUser = { role: 'guest', name: 'Guest User' };
    cart = [];
    updateCartBadge();
    showScreen('login');
    showNotification('Logged out successfully');
}

// Tab management functions
function showGolferTab(tabName, event) {
    // Update tab styling
    document.querySelectorAll('#golferDashboard nav a').forEach(tab => {
        tab.classList.remove('text-primary', 'border-b-2', 'border-primary', 'tab-active');
        tab.classList.add('text-gray-500');
    });

    // Update clicked tab or find by ID if event not available
    if (event && event.target) {
        event.target.classList.remove('text-gray-500');
        event.target.classList.add('text-primary', 'border-b-2', 'border-primary', 'tab-active');
    } else {
        const tabElement = document.getElementById(tabName + '-tab');
        if (tabElement) {
            tabElement.classList.remove('text-gray-500');
            tabElement.classList.add('text-primary', 'border-b-2', 'border-primary', 'tab-active');
        }
    }

    // Show/hide tab content
    document.querySelectorAll('#golferDashboard .tab-content').forEach(content => {
        content.classList.add('hidden');
    });

    const targetContent = document.getElementById('golfer-' + tabName);
    if (targetContent) {
        targetContent.classList.remove('hidden');
    }

    showNotification(`Showing ${tabName} tab`);
}

function showCaddieTab(tabName, event) {
    // Update tab styling
    document.querySelectorAll('#caddieDashboard nav a').forEach(tab => {
        tab.classList.remove('text-primary', 'border-b-2', 'border-primary', 'tab-active');
        tab.classList.add('text-gray-500');
    });

    // Update clicked tab or find programmatically
    if (event && event.target) {
        event.target.classList.remove('text-gray-500');
        event.target.classList.add('text-primary', 'border-b-2', 'border-primary', 'tab-active');
    } else {
        // Find the correct tab by matching onclick attribute
        document.querySelectorAll('#caddieDashboard nav a').forEach(tab => {
            if (tab.getAttribute('onclick').includes(`'${tabName}'`)) {
                tab.classList.remove('text-gray-500');
                tab.classList.add('text-primary', 'border-b-2', 'border-primary', 'tab-active');
            }
        });
    }

    // Show/hide tab content
    document.querySelectorAll('#caddieDashboard .tab-content').forEach(content => {
        content.classList.add('hidden');
    });

    const targetContent = document.getElementById('caddie-' + tabName);
    if (targetContent) {
        targetContent.classList.remove('hidden');
    }

    showNotification(`Showing ${tabName} tab`);
}

// Message function
function sendMessage() {
    showNotification('Message sent successfully');
    // Clear the form
    document.querySelector('textarea').value = '';
    document.querySelector('select').selectedIndex = 0;
}

function showManagerTab(tabName, event) {
    // Update tab styling
    document.querySelectorAll('#managerDashboard nav a').forEach(tab => {
        tab.classList.remove('text-primary', 'border-b-2', 'border-primary', 'tab-active');
        tab.classList.add('text-gray-500');
    });

    if (event && event.target) {
        event.target.classList.remove('text-gray-500');
        event.target.classList.add('text-primary', 'border-b-2', 'border-primary', 'tab-active');
    }

    // Show/hide tab content
    document.querySelectorAll('#managerDashboard .tab-content').forEach(content => {
        content.classList.add('hidden');
    });

    const targetContent = document.getElementById('manager-' + tabName);
    if (targetContent) {
        targetContent.classList.remove('hidden');

        // Initialize course conditions when Reports tab is shown
        if (tabName === 'reports') {
            setTimeout(() => {
                initializeCourseConditions();
            }, 100);
        }
    }

    showNotification(`Showing ${tabName} tab`);
}

function showProShopTab(tabName, event) {
    // Update tab styling
    document.querySelectorAll('#proshopDashboard nav a').forEach(tab => {
        tab.classList.remove('text-primary', 'border-b-2', 'border-primary', 'tab-active');
        tab.classList.add('text-gray-500');
    });

    if (event && event.target) {
        event.target.classList.remove('text-gray-500');
        event.target.classList.add('text-primary', 'border-b-2', 'border-primary', 'tab-active');
    }

    // Show/hide tab content
    document.querySelectorAll('#proshopDashboard .tab-content').forEach(content => {
        content.classList.add('hidden');
    });

    const targetContent = document.getElementById('proshop-' + tabName);
    if (targetContent) {
        targetContent.classList.remove('hidden');
    }

    showNotification(`Showing ${tabName} view`);
}

// Food ordering functions
function showFoodCategory(category) {
    // Update tab styling
    document.querySelectorAll('#foodOrdering nav a').forEach(tab => {
        tab.classList.remove('text-primary', 'border-b-2', 'border-primary');
        tab.classList.add('text-gray-500');
    });

    event.target.classList.remove('text-gray-500');
    event.target.classList.add('text-primary', 'border-b-2', 'border-primary');

    showNotification(`Showing ${category} menu`);
}

function addToCart(itemName, price) {
    const existingItem = cart.find(item => item.name === itemName);

    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            name: itemName,
            price: price,
            quantity: 1
        });
    }

    updateCartBadge();
    showNotification(`${itemName} added to cart`);
}

function removeFromCart(itemName) {
    const itemIndex = cart.findIndex(item => item.name === itemName);
    if (itemIndex > -1) {
        cart.splice(itemIndex, 1);
        updateCartBadge();
        updateCartDisplay();
        showNotification('Item removed from cart');
    }
}

function updateCartQuantity(itemName, quantity) {
    const item = cart.find(item => item.name === itemName);
    if (item) {
        item.quantity = Math.max(0, quantity);
        if (item.quantity === 0) {
            removeFromCart(itemName);
        } else {
            updateCartBadge();
            updateCartDisplay();
        }
    }
}

function updateCartBadge() {
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    const badges = document.querySelectorAll('#cart-badge, #cart-badge-header');

    badges.forEach(badge => {
        if (totalItems > 0) {
            badge.textContent = totalItems;
            badge.classList.remove('hidden');
        } else {
            badge.classList.add('hidden');
        }
    });
}

function updateCartDisplay() {
    const cartItemsContainer = document.getElementById('cart-items');
    const emptyCartContainer = document.getElementById('empty-cart');
    const cartFooter = document.getElementById('cart-footer');

    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '';
        emptyCartContainer.classList.remove('hidden');
        cartFooter.classList.add('hidden');
        return;
    }

    emptyCartContainer.classList.add('hidden');
    cartFooter.classList.remove('hidden');

    let cartHTML = '';
    let total = 0;

    cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        cartHTML += `
            <div class="tiffany-card rounded-lg p-4 border">
                <div class="flex items-center justify-between">
                    <div class="flex-1">
                        <h4 class="font-semibold">${item.name}</h4>
                        <p class="text-sm text-gray-500">฿${item.price} each</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="updateCartQuantity('${item.name}', ${item.quantity - 1})"
                                class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
                            <span class="material-symbols-outlined text-sm">remove</span>
                        </button>
                        <span class="font-semibold w-8 text-center">${item.quantity}</span>
                        <button onclick="updateCartQuantity('${item.name}', ${item.quantity + 1})"
                                class="w-8 h-8 rounded-full bg-primary/10 text-primary flex items-center justify-center">
                            <span class="material-symbols-outlined text-sm">add</span>
                        </button>
                    </div>
                    <div class="text-right ml-4">
                        <p class="font-bold">฿${itemTotal}</p>
                        <button onclick="removeFromCart('${item.name}')"
                                class="text-red-500 text-sm hover:underline">Remove</button>
                    </div>
                </div>
            </div>
        `;
    });

    cartItemsContainer.innerHTML = cartHTML;
    document.getElementById('cart-total').textContent = `฿${total}`;
}

function updateCheckoutDisplay() {
    const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const serviceCharge = Math.round(subtotal * 0.10);
    const tax = Math.round((subtotal + serviceCharge) * 0.07);
    const total = subtotal + serviceCharge + tax;

    document.getElementById('checkout-subtotal').textContent = `฿${subtotal}`;
    document.getElementById('checkout-service').textContent = `฿${serviceCharge}`;
    document.getElementById('checkout-tax').textContent = `฿${tax}`;
    document.getElementById('checkout-total').textContent = `฿${total}`;
}

// Order tracking system
let activeOrders = [];

function placeOrder() {
    if (cart.length === 0) {
        showNotification('Your cart is empty');
        return;
    }

    const orderNumber = Math.floor(Math.random() * 10000);

    // Get user's location for delivery tracking
    getCurrentLocation().then(location => {
        const order = {
            id: orderNumber,
            items: [...cart],
            status: 'preparing',
            orderTime: new Date(),
            estimatedDelivery: new Date(Date.now() + 20 * 60 * 1000), // 20 minutes
            deliveryLocation: location,
            driverLocation: getRandomLocation(), // Simulate driver starting location
            progress: 0
        };

        activeOrders.push(order);
        showNotification(`Order #${orderNumber} placed successfully! Estimated delivery: 20 minutes`);
        cart = [];
        updateCartBadge();

        // Start tracking simulation
        simulateOrderProgress(order);

        showScreen(currentUser.role + 'Dashboard');

        // Update golfer dashboard if it's a golfer
        if (currentUser.role === 'golfer') {
            setTimeout(updateGolferDashboard, 500);
        }
    }).catch(() => {
        // Fallback if location not available
        const order = {
            id: orderNumber,
            items: [...cart],
            status: 'preparing',
            orderTime: new Date(),
            estimatedDelivery: new Date(Date.now() + 20 * 60 * 1000),
            deliveryLocation: { lat: 13.7563, lng: 100.5018, name: "Golf Course" },
            driverLocation: { lat: 13.7563, lng: 100.5018, name: "Kitchen" },
            progress: 0
        };

        activeOrders.push(order);
        showNotification(`Order #${orderNumber} placed successfully! Estimated delivery: 20 minutes`);
        cart = [];
        updateCartBadge();

        simulateOrderProgress(order);
        showScreen(currentUser.role + 'Dashboard');

        // Update golfer dashboard if it's a golfer
        if (currentUser.role === 'golfer') {
            setTimeout(updateGolferDashboard, 500);
        }
    });
}

// GPS Location functions
function getCurrentLocation() {
    return new Promise((resolve, reject) => {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    resolve({
                        lat: position.coords.latitude,
                        lng: position.coords.longitude,
                        name: "Your Location"
                    });
                },
                (error) => {
                    reject(error);
                }
            );
        } else {
            reject(new Error('Geolocation not supported'));
        }
    });
}

function getRandomLocation() {
    // Simulate kitchen/driver locations around the golf course
    const baseLocation = { lat: 13.7563, lng: 100.5018 };
    return {
        lat: baseLocation.lat + (Math.random() - 0.5) * 0.01,
        lng: baseLocation.lng + (Math.random() - 0.5) * 0.01,
        name: "Kitchen"
    };
}

function calculateDistance(lat1, lng1, lat2, lng2) {
    const R = 6371; // Earth's radius in km
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLng = (lng2 - lng1) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
        Math.sin(dLng/2) * Math.sin(dLng/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c;
}

function simulateOrderProgress(order) {
    const interval = setInterval(() => {
        order.progress += Math.random() * 15; // Random progress increment

        if (order.progress >= 100) {
            order.status = 'delivered';
            order.progress = 100;
            clearInterval(interval);
            showNotification(`Order #${order.id} has been delivered!`);
            // Remove from active orders after 5 minutes
            setTimeout(() => {
                activeOrders = activeOrders.filter(o => o.id !== order.id);
                updateOrderTracking();
            }, 300000);
        } else if (order.progress >= 70) {
            order.status = 'out_for_delivery';
            // Update driver location to simulate movement
            const progress = (order.progress - 70) / 30;
            order.driverLocation = {
                lat: order.driverLocation.lat + (order.deliveryLocation.lat - order.driverLocation.lat) * progress * 0.1,
                lng: order.driverLocation.lng + (order.deliveryLocation.lng - order.driverLocation.lng) * progress * 0.1,
                name: "Driver"
            };
        } else if (order.progress >= 40) {
            order.status = 'cooking';
        }

        updateOrderTracking();

        // Also update golfer dashboard if golfer is logged in
        if (currentUser.role === 'golfer') {
            updateGolferOrders();
        }
    }, 3000); // Update every 3 seconds
}

function updateOrderTracking() {
    const activeOrdersContainer = document.getElementById('active-orders');
    const noOrdersDiv = document.getElementById('no-orders');

    if (activeOrders.length === 0) {
        activeOrdersContainer.innerHTML = '';
        noOrdersDiv.style.display = 'block';
        return;
    }

    noOrdersDiv.style.display = 'none';

    activeOrdersContainer.innerHTML = activeOrders.map(order => `
        <div class="tiffany-card rounded-lg p-4 border">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h4 class="font-semibold">Order #${order.id}</h4>
                    <p class="text-sm text-gray-500">${order.items.length} items • ${getStatusText(order.status)}</p>
                </div>
                <div class="text-right">
                    <div class="text-primary font-semibold">${Math.round(order.progress)}%</div>
                    <div class="text-xs text-gray-500">ETA: ${getEstimatedTime(order.estimatedDelivery)}</div>
                </div>
            </div>

            <div class="mb-4">
                <div class="flex justify-between text-sm mb-1">
                    <span>Progress</span>
                    <span>${Math.round(order.progress)}%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: ${order.progress}%"></div>
                </div>
            </div>

            <div class="space-y-2 mb-4">
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined ${order.progress >= 0 ? 'text-primary' : 'text-gray-300'}">restaurant</span>
                    <span class="text-sm ${order.progress >= 0 ? 'text-gray-900' : 'text-gray-400'}">Order Placed</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined ${order.progress >= 40 ? 'text-primary' : 'text-gray-300'}">soup_kitchen</span>
                    <span class="text-sm ${order.progress >= 40 ? 'text-gray-900' : 'text-gray-400'}">Preparing</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined ${order.progress >= 70 ? 'text-primary' : 'text-gray-300'}">local_shipping</span>
                    <span class="text-sm ${order.progress >= 70 ? 'text-gray-900' : 'text-gray-400'}">Out for Delivery</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined ${order.progress >= 100 ? 'text-primary' : 'text-gray-300'}">check_circle</span>
                    <span class="text-sm ${order.progress >= 100 ? 'text-gray-900' : 'text-gray-400'}">Delivered</span>
                </div>
            </div>

            ${order.status === 'out_for_delivery' ? `
                <div class="bg-primary/10 rounded-lg p-3">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="material-symbols-outlined text-primary">location_on</span>
                        <span class="font-semibold text-primary">Driver Location</span>
                    </div>
                    <div class="text-sm text-gray-600">
                        <p>📍 ${order.driverLocation.name}</p>
                        <p class="text-xs">Lat: ${order.driverLocation.lat.toFixed(4)}, Lng: ${order.driverLocation.lng.toFixed(4)}</p>
                        <p class="text-xs mt-1">Distance to you: ${calculateDistance(
                            order.driverLocation.lat, order.driverLocation.lng,
                            order.deliveryLocation.lat, order.deliveryLocation.lng
                        ).toFixed(2)} km</p>
                    </div>
                </div>
            ` : ''}
        </div>
    `).join('');
}

function getStatusText(status) {
    switch(status) {
        case 'preparing': return 'Preparing';
        case 'cooking': return 'Cooking';
        case 'out_for_delivery': return 'Out for Delivery';
        case 'delivered': return 'Delivered';
        default: return 'Processing';
    }
}

function getEstimatedTime(estimatedDelivery) {
    const now = new Date();
    const diff = estimatedDelivery - now;
    if (diff <= 0) return 'Any moment';
    const minutes = Math.ceil(diff / 60000);
    return `${minutes} min`;
}

// Golfer Dashboard Updates
let currentHole = 7;
let playerLocation = { lat: 13.7563, lng: 100.5018 };

function updateGolferDashboard() {
    updateGolferOrders();
    updatePlayerLocation();
}

function updateGolferOrders() {
    const golferOrdersContainer = document.getElementById('golfer-orders-container');
    const noOrdersDiv = document.getElementById('golfer-no-orders');

    if (!golferOrdersContainer || !noOrdersDiv) return;

    if (activeOrders.length === 0) {
        golferOrdersContainer.innerHTML = '';
        noOrdersDiv.style.display = 'block';
        return;
    }

    noOrdersDiv.style.display = 'none';

    golferOrdersContainer.innerHTML = activeOrders.map(order => `
        <div class="tiffany-card rounded-lg p-4 border">
            <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center">
                        <span class="material-symbols-outlined text-primary text-sm">receipt</span>
                    </div>
                    <div>
                        <h4 class="font-semibold">Order #${order.id}</h4>
                        <p class="text-sm text-gray-500">${order.items.length} items • ${getStatusText(order.status)}</p>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-primary font-bold">${Math.round(order.progress)}%</div>
                    <div class="text-xs text-gray-500">ETA: ${getEstimatedTime(order.estimatedDelivery)}</div>
                </div>
            </div>

            <div class="mb-3">
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: ${order.progress}%"></div>
                </div>
            </div>

            <div class="text-sm space-y-1">
                ${order.items.map(item => `
                    <div class="flex justify-between">
                        <span>${item.name} x${item.quantity}</span>
                        <span class="font-medium">฿${(item.price * item.quantity)}</span>
                    </div>
                `).join('')}
            </div>

            ${order.status === 'out_for_delivery' ? `
                <div class="mt-3 bg-green-50 rounded-lg p-3">
                    <div class="flex items-center gap-2 mb-1">
                        <span class="material-symbols-outlined text-green-600 text-sm">local_shipping</span>
                        <span class="text-sm font-semibold text-green-700">Driver Location</span>
                    </div>
                    <p class="text-xs text-gray-600">Distance: ${calculateDistance(
                        order.driverLocation.lat, order.driverLocation.lng,
                        order.deliveryLocation.lat, order.deliveryLocation.lng
                    ).toFixed(2)} km from Hole ${currentHole}</p>
                </div>
            ` : ''}
        </div>
    `).join('');
}

function updatePlayerLocation() {
    // Simulate GPS movement around the course
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            (position) => {
                playerLocation.lat = position.coords.latitude;
                playerLocation.lng = position.coords.longitude;
                updateLocationDisplay();
            },
            () => {
                // Simulate movement if GPS not available
                simulateMovement();
                updateLocationDisplay();
            }
        );
    } else {
        simulateMovement();
        updateLocationDisplay();
    }
}

function simulateMovement() {
    // Simulate small GPS movements as player moves around the hole
    playerLocation.lat += (Math.random() - 0.5) * 0.0001;
    playerLocation.lng += (Math.random() - 0.5) * 0.0001;
}

function updateLocationDisplay() {
    const playerLatElement = document.getElementById('player-lat');
    const playerLngElement = document.getElementById('player-lng');
    const distanceToPinElement = document.getElementById('distance-to-pin');

    if (playerLatElement) playerLatElement.textContent = playerLocation.lat.toFixed(4);
    if (playerLngElement) playerLngElement.textContent = playerLocation.lng.toFixed(4);

    // Simulate distance to pin (random between 80-200 yards)
    const distanceToPin = Math.floor(Math.random() * 120) + 80;
    if (distanceToPinElement) distanceToPinElement.textContent = `${distanceToPin} yards`;
}

function updateLocation(type) {
    if (type === 'current') {
        updatePlayerLocation();
        showNotification('GPS location updated!');

        // Simulate hole progression
        if (Math.random() > 0.7) {
            currentHole = Math.min(18, currentHole + 1);
            document.getElementById('current-hole').textContent = currentHole;
            showNotification(`Moved to Hole ${currentHole}!`);
        }
    } else if (type === 'break') {
        showNotification('Location updated: On Break');
    }
}

// Caddy GPS Functions
let gpsActive = false;

function toggleRound() {
    if (!gpsActive) {
        startRound();
    } else {
        endRound();
    }
}

function startRound() {
    gpsActive = true;
    updateRoundButton();

    // Start GPS tracking in background
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            (position) => {
                startLocationTracking();
                showNotification('🎯 Round Started! GPS tracking active');
            },
            (error) => {
                startLocationTracking(); // Start anyway with fallback
                showNotification('⛳ Round Started! GPS using fallback mode');
            }
        );
    } else {
        startLocationTracking();
        showNotification('⛳ Round Started! Manual tracking mode');
    }
}

function endRound() {
    gpsActive = false;
    updateRoundButton();

    if (locationWatchId) {
        navigator.geolocation.clearWatch(locationWatchId);
        locationWatchId = null;
    }

    showNotification('🏁 Round Ended! GPS tracking stopped');
}

function updateRoundButton() {
    const btn = document.getElementById('round-btn');
    const icon = document.getElementById('round-icon');
    const text = document.getElementById('round-text');

    if (!btn || !icon || !text) return;

    if (gpsActive) {
        btn.className = 'w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-3 transition-all bg-red-600 text-white';
        icon.textContent = 'stop';
        text.textContent = t('end_round');
        text.setAttribute('data-translate', 'end_round');
    } else {
        btn.className = 'w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-3 transition-all bg-primary text-white';
        icon.textContent = 'play_arrow';
        text.textContent = t('start_round');
        text.setAttribute('data-translate', 'start_round');
    }
}

let locationWatchId = null;

function startLocationTracking() {
    if (navigator.geolocation) {
        locationWatchId = navigator.geolocation.watchPosition(
            (position) => {
                playerLocation.lat = position.coords.latitude;
                playerLocation.lng = position.coords.longitude;
                updateLocationDisplay();

                // Update golfer dashboard if golfer is logged in
                if (currentUser.role === 'golfer') {
                    updateGolferOrders();
                }
            },
            (error) => {
                console.log('GPS tracking error:', error);
                // Use simulated location as fallback
                simulateMovement();
                updateLocationDisplay();
            },
            {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 30000
            }
        );
    } else {
        // Fallback to simulated tracking
        setInterval(() => {
            if (gpsActive) {
                simulateMovement();
                updateLocationDisplay();
            }
        }, 5000);
    }
}

// Booking functions
function bookCaddy() {
    showNotification('Caddy booking request submitted');
}

// Caddie functions
// Report Issue Modal Functions
let selectedIssueType = null;
let selectedHole = null;
let activeReports = [];

function reportIssue() {
    const modal = document.getElementById('reportIssueModal');
    if (modal) {
        modal.style.display = 'flex';
        resetReportModal();
    }
}

function closeReportModal() {
    const modal = document.getElementById('reportIssueModal');
    if (modal) {
        modal.style.display = 'none';
        resetReportModal();
    }
}

function resetReportModal() {
    selectedIssueType = null;
    selectedHole = null;

    // Reset radio buttons
    const radioButtons = document.querySelectorAll('input[name="issueType"]');
    radioButtons.forEach(radio => radio.checked = false);

    // Reset hole buttons
    const holeButtons = document.querySelectorAll('.hole-btn');
    holeButtons.forEach(btn => {
        btn.classList.remove('bg-primary', 'text-white');
        btn.classList.add('hover:bg-primary', 'hover:text-white');
    });

    // Reset textarea
    const comments = document.getElementById('issueComments');
    if (comments) comments.value = '';

    // Disable submit button
    const submitBtn = document.getElementById('submit-btn');
    if (submitBtn) submitBtn.disabled = true;
}

function selectIssueType(type) {
    selectedIssueType = type;

    // Check the radio button
    const radio = document.querySelector(`input[value="${type}"]`);
    if (radio) radio.checked = true;

    checkFormValidity();
}

function selectHole(holeNumber) {
    selectedHole = holeNumber;

    // Update hole button styling
    const holeButtons = document.querySelectorAll('.hole-btn');
    holeButtons.forEach(btn => {
        btn.classList.remove('bg-primary', 'text-white');
        btn.classList.add('hover:bg-primary', 'hover:text-white');
    });

    // Highlight selected hole
    const selectedBtn = document.querySelector(`.hole-btn:nth-child(${holeNumber})`);
    if (selectedBtn) {
        selectedBtn.classList.add('bg-primary', 'text-white');
        selectedBtn.classList.remove('hover:bg-primary', 'hover:text-white');
    }

    checkFormValidity();
}

function checkFormValidity() {
    const submitBtn = document.getElementById('submit-btn');
    if (submitBtn) {
        submitBtn.disabled = !(selectedIssueType && selectedHole);
    }
}

function submitIssueReport() {
    if (!selectedIssueType || !selectedHole) {
        showNotification('Please select issue type and hole number');
        return;
    }

    const issueTypes = {
        'cart': 'Cart Battery Issue',
        'medical': 'Golfer Injured - Send Medical Service',
        'course': 'Course Damage',
        'marshall': 'Request Marshall'
    };

    const comments = document.getElementById('issueComments').value;
    const issueText = issueTypes[selectedIssueType];
    const reportId = 'RPT' + Date.now().toString().slice(-6);

    // Create trackable report
    const report = {
        id: reportId,
        type: selectedIssueType,
        hole: selectedHole,
        description: issueText,
        comments: comments,
        timestamp: new Date(),
        status: 'submitted',
        reporter: 'Ning',
        priority: selectedIssueType === 'medical' ? 'urgent' : selectedIssueType === 'marshall' ? 'high' : 'normal',
        estimatedResponse: selectedIssueType === 'medical' ? 5 : selectedIssueType === 'marshall' ? 10 : 15
    };

    // Add to active reports
    activeReports.push(report);

    // Create notification based on issue type
    let notification = '';
    switch(selectedIssueType) {
        case 'medical':
            notification = `🚨 URGENT Report #${reportId}: Medical dispatched to Hole ${selectedHole}`;
            break;
        case 'cart':
            notification = `🔋 Report #${reportId}: Maintenance notified for Hole ${selectedHole}`;
            break;
        case 'course':
            notification = `⚠️ Report #${reportId}: Grounds crew alerted for Hole ${selectedHole}`;
            break;
        case 'marshall':
            notification = `👮 Report #${reportId}: Marshall dispatched to Hole ${selectedHole}`;
            break;
    }

    showNotification(notification);

    // Simulate report status updates
    simulateReportProgress(report);

    // Update reports display
    updateReportsDisplay();

    closeReportModal();
}

function simulateReportProgress(report) {
    const statusUpdates = [
        { status: 'received', time: 1000, message: 'Report acknowledged by dispatch' },
        { status: 'assigned', time: 3000, message: 'Personnel assigned and en route' },
        { status: 'on-site', time: 8000, message: 'Personnel arrived on location' },
        { status: 'resolved', time: 12000, message: 'Issue resolved successfully' }
    ];

    statusUpdates.forEach((update, index) => {
        setTimeout(() => {
            const reportIndex = activeReports.findIndex(r => r.id === report.id);
            if (reportIndex !== -1) {
                activeReports[reportIndex].status = update.status;
                activeReports[reportIndex].lastUpdate = new Date();

                // Show notification for status update
                const statusEmoji = {
                    'received': '📨',
                    'assigned': '👨‍⚕️',
                    'on-site': '📍',
                    'resolved': '✅'
                };

                showNotification(`${statusEmoji[update.status]} #${report.id}: ${update.message}`);
                updateReportsDisplay();
            }
        }, update.time);
    });
}

function updateReportsDisplay() {
    const reportsContainer = document.getElementById('activeReports');
    if (!reportsContainer) return;

    if (activeReports.length === 0) {
        reportsContainer.innerHTML = '<p class="text-gray-500 text-center py-4">No active reports</p>';
        return;
    }

    const getStatusColor = (status) => {
        switch(status) {
            case 'submitted': return 'bg-blue-100 text-blue-800';
            case 'received': return 'bg-yellow-100 text-yellow-800';
            case 'assigned': return 'bg-orange-100 text-orange-800';
            case 'on-site': return 'bg-purple-100 text-purple-800';
            case 'resolved': return 'bg-green-100 text-green-800';
            default: return 'bg-gray-100 text-gray-800';
        }
    };

    const getPriorityEmoji = (priority) => {
        switch(priority) {
            case 'urgent': return '🚨';
            case 'high': return '⚠️';
            case 'normal': return '📋';
            default: return '📋';
        }
    };

    const getTypeDescription = (type) => {
        const descriptions = {
            'cart': 'Cart Battery Issue',
            'medical': 'Medical Emergency',
            'course': 'Course Damage',
            'marshall': 'Marshall Request'
        };
        return descriptions[type] || 'Unknown Issue';
    };

    reportsContainer.innerHTML = activeReports.map(report => `
        <div class="border border-gray-200 rounded-lg p-4 mb-3">
            <div class="flex justify-between items-start mb-2">
                <div class="flex items-center gap-2">
                    <span class="text-lg">${getPriorityEmoji(report.priority)}</span>
                    <span class="font-semibold text-gray-900">#${report.id}</span>
                    <span class="text-sm px-2 py-1 rounded-full ${getStatusColor(report.status)}">${report.status.toUpperCase()}</span>
                </div>
                <span class="text-xs text-gray-500">Hole ${report.hole}</span>
            </div>
            <div class="text-sm text-gray-700 mb-1">${getTypeDescription(report.type)}</div>
            ${report.comments ? `<div class="text-xs text-gray-600 mb-2">"${report.comments}"</div>` : ''}
            <div class="text-xs text-gray-500">
                Reporter: ${report.reporter} • ${new Date(report.timestamp).toLocaleTimeString()}
            </div>
        </div>
    `).join('');
}

function requestBreak() {
    showNotification('Break request submitted');
}

// Communication functions
function openChat(contact) {
    showNotification(`Opening chat with ${contact}`);
}

// Staff management functions
function contactStaff(staffId) {
    showNotification(`Opening chat with staff member`);
}

function viewStaffDetails(staffId) {
    showNotification(`Viewing details for staff member`);
}

function assignCaddy(caddyId) {
    showNotification(`Assigning caddy to next available group`);
}

// Pro shop functions
function showInventoryCategory(category) {
    showNotification(`Showing ${category} inventory details`);
}

// Manager functions
function showAlert(type) {
    showNotification(`Opening ${type} alert details`);
}

// Booking functions
function modifyBooking(bookingId) {
    showNotification('Opening booking modification form');
}

function cancelBooking(bookingId) {
    showNotification('Booking cancellation requested');
}

function quickBookTeeTime() {
    showNotification('Opening tee time booking form');
}

function bookLesson() {
    showNotification('Opening lesson booking form');
}

function viewTournamentDetails() {
    showNotification('Opening tournament details');
}

function withdrawTournament() {
    showNotification('Tournament withdrawal requested');
}

// Event functions
function registerEvent(eventId) {
    showNotification('Event registration submitted');
}

// Report functions
function exportReport(reportType) {
    showNotification(`Exporting ${reportType} report as PDF`);
}

// Pro Shop functions
function manageBooking(bookingId) {
    showNotification('Opening booking management');
}

function viewMemberProfile(memberId) {
    showNotification('Opening member profile');
}

// Location functions
function updateLocation(status) {
    if (status === 'break') {
        showNotification('Status updated to: On Break');
    } else if (status === 'issue') {
        showNotification('Issue report submitted with location');
    }
}

// Manager Settings functions
function configureAlerts() {
    showNotification('Opening alert configuration');
}

function manageStaffAccess() {
    showNotification('Opening staff access management');
}

function setOperatingHours() {
    showNotification('Opening operating hours settings');
}

function configureReports() {
    showNotification('Opening report automation settings');
}

// Course Conditions Functions
let currentCourseCategory = 'greens';
let currentCourseElement = 'green-1';
let coursePhotos = [];

// Course elements data
const courseElements = {
    greens: [
        {id: 'green-1', name: 'Green 1', displayName: 'Green 1'},
        {id: 'green-2', name: 'Green 2', displayName: 'Green 2'},
        {id: 'green-3', name: 'Green 3', displayName: 'Green 3'},
        {id: 'green-4', name: 'Green 4', displayName: 'Green 4'},
        {id: 'green-5', name: 'Green 5', displayName: 'Green 5'},
        {id: 'green-6', name: 'Green 6', displayName: 'Green 6'},
        {id: 'green-7', name: 'Green 7', displayName: 'Green 7'},
        {id: 'green-8', name: 'Green 8', displayName: 'Green 8'},
        {id: 'green-9', name: 'Green 9', displayName: 'Green 9'},
        {id: 'green-10', name: 'Green 10', displayName: 'Green 10'},
        {id: 'green-11', name: 'Green 11', displayName: 'Green 11'},
        {id: 'green-12', name: 'Green 12', displayName: 'Green 12'},
        {id: 'green-13', name: 'Green 13', displayName: 'Green 13'},
        {id: 'green-14', name: 'Green 14', displayName: 'Green 14'},
        {id: 'green-15', name: 'Green 15', displayName: 'Green 15'},
        {id: 'green-16', name: 'Green 16', displayName: 'Green 16'},
        {id: 'green-17', name: 'Green 17', displayName: 'Green 17'},
        {id: 'green-18', name: 'Green 18', displayName: 'Green 18'}
    ],
    fairways: [
        {id: 'fairway-1', name: 'Fairway 1', displayName: 'Fairway 1'},
        {id: 'fairway-2', name: 'Fairway 2', displayName: 'Fairway 2'},
        {id: 'fairway-3', name: 'Fairway 3', displayName: 'Fairway 3'},
        {id: 'fairway-4', name: 'Fairway 4', displayName: 'Fairway 4'},
        {id: 'fairway-5', name: 'Fairway 5', displayName: 'Fairway 5'},
        {id: 'fairway-6', name: 'Fairway 6', displayName: 'Fairway 6'},
        {id: 'fairway-7', name: 'Fairway 7', displayName: 'Fairway 7'},
        {id: 'fairway-8', name: 'Fairway 8', displayName: 'Fairway 8'},
        {id: 'fairway-9', name: 'Fairway 9', displayName: 'Fairway 9'},
        {id: 'fairway-10', name: 'Fairway 10', displayName: 'Fairway 10'},
        {id: 'fairway-11', name: 'Fairway 11', displayName: 'Fairway 11'},
        {id: 'fairway-12', name: 'Fairway 12', displayName: 'Fairway 12'},
        {id: 'fairway-13', name: 'Fairway 13', displayName: 'Fairway 13'},
        {id: 'fairway-14', name: 'Fairway 14', displayName: 'Fairway 14'},
        {id: 'fairway-15', name: 'Fairway 15', displayName: 'Fairway 15'},
        {id: 'fairway-16', name: 'Fairway 16', displayName: 'Fairway 16'},
        {id: 'fairway-17', name: 'Fairway 17', displayName: 'Fairway 17'},
        {id: 'fairway-18', name: 'Fairway 18', displayName: 'Fairway 18'}
    ],
    bunkers: [
        {id: 'bunker-1a', name: 'Bunker 1A', displayName: 'Hole 1 - Bunker A'},
        {id: 'bunker-1b', name: 'Bunker 1B', displayName: 'Hole 1 - Bunker B'},
        {id: 'bunker-2a', name: 'Bunker 2A', displayName: 'Hole 2 - Bunker A'},
        {id: 'bunker-2b', name: 'Bunker 2B', displayName: 'Hole 2 - Bunker B'},
        {id: 'bunker-3a', name: 'Bunker 3A', displayName: 'Hole 3 - Bunker A'},
        {id: 'bunker-4a', name: 'Bunker 4A', displayName: 'Hole 4 - Bunker A'},
        {id: 'bunker-4b', name: 'Bunker 4B', displayName: 'Hole 4 - Bunker B'},
        {id: 'bunker-4c', name: 'Bunker 4C', displayName: 'Hole 4 - Bunker C'},
        {id: 'bunker-5a', name: 'Bunker 5A', displayName: 'Hole 5 - Bunker A'},
        {id: 'bunker-6a', name: 'Bunker 6A', displayName: 'Hole 6 - Bunker A'},
        {id: 'bunker-7a', name: 'Bunker 7A', displayName: 'Hole 7 - Bunker A'},
        {id: 'bunker-7b', name: 'Bunker 7B', displayName: 'Hole 7 - Bunker B'},
        {id: 'bunker-8a', name: 'Bunker 8A', displayName: 'Hole 8 - Bunker A'},
        {id: 'bunker-9a', name: 'Bunker 9A', displayName: 'Hole 9 - Bunker A'},
        {id: 'bunker-10a', name: 'Bunker 10A', displayName: 'Hole 10 - Bunker A'}
    ],
    other: [
        {id: 'tee-box-1', name: 'Tee Box 1', displayName: 'Hole 1 - Tee Box'},
        {id: 'tee-box-2', name: 'Tee Box 2', displayName: 'Hole 2 - Tee Box'},
        {id: 'cart-path-main', name: 'Main Cart Path', displayName: 'Main Cart Path'},
        {id: 'cart-path-east', name: 'East Cart Path', displayName: 'East Cart Path'},
        {id: 'practice-green', name: 'Practice Green', displayName: 'Practice Green'},
        {id: 'driving-range', name: 'Driving Range', displayName: 'Driving Range'},
        {id: 'clubhouse-area', name: 'Clubhouse Area', displayName: 'Clubhouse Surroundings'},
        {id: 'parking-lot', name: 'Parking Lot', displayName: 'Parking Area'},
        {id: 'pond-hazard', name: 'Pond Water Hazard', displayName: 'Pond Water Hazard'},
        {id: 'landscaping', name: 'Landscaping', displayName: 'General Landscaping'}
    ]
};

function showCourseCategory(category) {
    currentCourseCategory = category;

    // Update tab styling
    document.querySelectorAll('.course-cat-tab').forEach(tab => {
        tab.classList.remove('text-primary', 'border-b-2', 'border-primary');
        tab.classList.add('text-gray-500');
    });

    const activeTab = document.getElementById(category + '-tab');
    if (activeTab) {
        activeTab.classList.remove('text-gray-500');
        activeTab.classList.add('text-primary', 'border-b-2', 'border-primary');
    }

    // Update element selector
    populateElementSelector();

    // Show/hide speed section (only for greens)
    const speedSection = document.getElementById('speed-section');
    if (speedSection) {
        speedSection.style.display = category === 'greens' ? 'block' : 'none';
    }

    showNotification(`Switched to ${category} view`);
}

function populateElementSelector() {
    const selector = document.getElementById('elementSelector');
    if (!selector) return;

    const elements = courseElements[currentCourseCategory] || [];
    selector.innerHTML = '';

    elements.forEach(element => {
        const option = document.createElement('option');
        option.value = element.id;
        option.textContent = element.displayName;
        selector.appendChild(option);
    });

    if (elements.length > 0) {
        currentCourseElement = elements[0].id;
        updateElementTitle();
    }
}

function selectCourseElement() {
    const selector = document.getElementById('elementSelector');
    if (selector) {
        currentCourseElement = selector.value;
        updateElementTitle();
        loadCourseElementData();
    }
}

function updateElementTitle() {
    const titleElement = document.getElementById('course-element-title');
    if (!titleElement) return;

    const elements = courseElements[currentCourseCategory] || [];
    const currentElement = elements.find(el => el.id === currentCourseElement);

    if (currentElement) {
        titleElement.textContent = currentElement.displayName;
    }
}

function loadCourseElementData() {
    // Load saved data for this course element
    const savedData = localStorage.getItem(`course-condition-${currentCourseElement}`);
    if (savedData) {
        const data = JSON.parse(savedData);

        // Populate form fields
        const conditionSelector = document.getElementById('conditionSelector');
        const speedInput = document.getElementById('speedInput');
        const notesInput = document.getElementById('notesInput');

        if (conditionSelector) conditionSelector.value = data.condition || 'perfect';
        if (speedInput) speedInput.value = data.speed || '';
        if (notesInput) notesInput.value = data.notes || '';

        coursePhotos = data.photos || [];
        updatePhotoGrid();
    } else {
        // Reset form for new element
        const conditionSelector = document.getElementById('conditionSelector');
        const speedInput = document.getElementById('speedInput');
        const notesInput = document.getElementById('notesInput');

        if (conditionSelector) conditionSelector.value = 'perfect';
        if (speedInput) speedInput.value = '';
        if (notesInput) notesInput.value = '';

        coursePhotos = [];
        updatePhotoGrid();
    }
}

function addPhoto() {
    // Simulate file picker and add photo
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.onchange = function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                coursePhotos.push({
                    id: Date.now(),
                    url: e.target.result,
                    name: file.name,
                    timestamp: new Date()
                });
                updatePhotoGrid();
                showNotification('Photo added successfully');
            };
            reader.readAsDataURL(file);
        }
    };
    input.click();
}

function removePhoto(index) {
    if (index >= 0 && index < coursePhotos.length) {
        coursePhotos.splice(index, 1);
        updatePhotoGrid();
        showNotification('Photo removed');
    }
}

function updatePhotoGrid() {
    const photoGrid = document.getElementById('photo-grid');
    if (!photoGrid) return;

    const addPhotoButton = `
        <button onclick="addPhoto()" class="border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center hover:border-primary hover:bg-primary/5 transition-colors" style="aspect-ratio: 1;">
            <span class="material-symbols-outlined text-gray-400 text-3xl mb-1">add_a_photo</span>
            <span class="text-sm text-gray-500" data-translate="add_photo">${t('add_photo')}</span>
        </button>
    `;

    const photosHTML = coursePhotos.map((photo, index) => `
        <div class="relative rounded-lg overflow-hidden bg-gray-200" style="aspect-ratio: 1;">
            <img src="${photo.url}" alt="Course Photo ${index + 1}" class="w-full h-full object-cover">
            <button onclick="removePhoto(${index})" class="absolute top-1 right-1 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-xs">×</button>
        </div>
    `).join('');

    photoGrid.innerHTML = photosHTML + addPhotoButton;
}

function saveCourseConditionUpdate() {
    const conditionSelector = document.getElementById('conditionSelector');
    const speedInput = document.getElementById('speedInput');
    const notesInput = document.getElementById('notesInput');

    const data = {
        element: currentCourseElement,
        category: currentCourseCategory,
        condition: conditionSelector ? conditionSelector.value : 'perfect',
        speed: speedInput ? speedInput.value : '',
        notes: notesInput ? notesInput.value : '',
        photos: coursePhotos,
        lastUpdated: new Date(),
        updatedBy: 'Manager'
    };

    // Save to localStorage
    localStorage.setItem(`course-condition-${currentCourseElement}`, JSON.stringify(data));

    // Show success message
    const element = courseElements[currentCourseCategory]?.find(el => el.id === currentCourseElement);
    const elementName = element ? element.displayName : currentCourseElement;

    showNotification(`${elementName} condition updated successfully`);

    // Could potentially navigate back or stay on current element
}

function cancelCourseConditionUpdate() {
    // Reset form to last saved state
    loadCourseElementData();
    showNotification('Changes cancelled');
}

function goBackFromCourseConditions() {
    // This could navigate to a course overview or manager dashboard
    showNotification('Returning to reports overview');
}

// Initialize course conditions when the reports tab is shown
function initializeCourseConditions() {
    // Pre-populate some sample data for demonstration
    const sampleData = {
        'green-1': {
            condition: 'perfect',
            speed: '10.5',
            notes: 'Green in excellent condition. Recently overseeded and rolling smoothly.',
            photos: [
                {
                    id: 1001,
                    url: './green.jpg',
                    name: 'green1_morning_inspection.jpg',
                    timestamp: new Date()
                }
            ],
            lastUpdated: new Date(),
            updatedBy: 'Manager'
        },
        'fairway-1': {
            condition: 'good',
            speed: '',
            notes: 'Some minor divots need repair. Overall fairway condition is good.',
            photos: [
                {
                    id: 1003,
                    url: './fairway.jpg',
                    name: 'fairway1_overview_inspection.jpg',
                    timestamp: new Date()
                }
            ],
            lastUpdated: new Date(),
            updatedBy: 'Maintenance Crew'
        },
        'bunker-1a': {
            condition: 'needs_attention',
            speed: '',
            notes: 'Sand needs to be raked and replaced. Heavy rain has caused compacting.',
            photos: [
                {
                    id: 1004,
                    url: './bunker.jpg',
                    name: 'bunker1a_condition_inspection.jpg',
                    timestamp: new Date()
                }
            ],
            lastUpdated: new Date(),
            updatedBy: 'Ning'
        },
        'green-2': {
            condition: 'excellent',
            speed: '9.8',
            notes: 'Minor aeration holes visible but green is playing well.',
            photos: [
                {
                    id: 1005,
                    url: './green.jpg',
                    name: 'green2_afternoon_inspection.jpg',
                    timestamp: new Date()
                }
            ],
            lastUpdated: new Date(),
            updatedBy: 'Ning'
        },
        'fairway-2': {
            condition: 'excellent',
            speed: '',
            notes: 'Fairway in pristine condition. No maintenance needed.',
            photos: [
                {
                    id: 1006,
                    url: './fairway.jpg',
                    name: 'fairway2_morning_check.jpg',
                    timestamp: new Date()
                }
            ],
            lastUpdated: new Date(),
            updatedBy: 'Manager'
        },
        'bunker-2a': {
            condition: 'good',
            speed: '',
            notes: 'Sand recently refreshed. Bunker edges need minor trimming.',
            photos: [
                {
                    id: 1007,
                    url: './bunker.jpg',
                    name: 'bunker2a_maintenance_complete.jpg',
                    timestamp: new Date()
                }
            ],
            lastUpdated: new Date(),
            updatedBy: 'Maintenance Crew'
        }
    };

    // Save sample data to localStorage
    Object.keys(sampleData).forEach(elementId => {
        if (!localStorage.getItem(`course-condition-${elementId}`)) {
            localStorage.setItem(`course-condition-${elementId}`, JSON.stringify(sampleData[elementId]));
        }
    });

    showCourseCategory('greens');
    populateElementSelector();
    loadCourseElementData();
}

function configureBackup() {
    showNotification('Opening data backup configuration');
}

function editProfile() {
    showNotification('Opening profile editor');
}

// Initialize app when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    showScreen('login');
    updateCartBadge();

    // Listen for messages from GPS iframe
    window.addEventListener('message', (event) => {
        if (event.data && event.data.type === 'gpsUpdate') {
            // Handle GPS updates from the iframe
            if (event.data.location) {
                playerLocation = event.data.location;
                updateLocationDisplay();
            }
            if (event.data.hole) {
                currentHole = event.data.hole;
                const holeElement = document.getElementById('current-hole');
                if (holeElement) {
                    holeElement.textContent = currentHole;
                }
            }
        }
    });

    // Register service worker for PWA
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
                .then((registration) => {
                    console.log('SW registered: ', registration);
                })
                .catch((registrationError) => {
                    console.log('SW registration failed: ', registrationError);
                });
        });
    }

    // Setup cart display when cart screen is shown
    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                const target = mutation.target;
                if (target.id === 'foodCart' && target.classList.contains('active')) {
                    updateCartDisplay();
                }
            }
        });
    });

    document.querySelectorAll('.screen').forEach(screen => {
        observer.observe(screen, { attributes: true });
    });

    // Initialize language system
    initializeLanguage();
});
</script>

</body>
</html>